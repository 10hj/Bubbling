// main.js

// --- 1) UI ÏöîÏÜå Ï∞∏Ï°∞ ---
const startBtn = document.getElementById('startBtn');
const retryBtn = document.getElementById('retryBtn');
const scriptColumns = document.getElementById('script-columns');
const listeningUI = document.getElementById('listening-ui');
const circle = document.getElementById('circle');
const statusText = document.getElementById('statusText');
const sentenceContainer = document.getElementById('sentence-container');
const blurOverlay = document.getElementById('blur-overlay');
const responseGuides = document.getElementById('response-guides');
const episodeSelectionContainer = document.getElementById('episode-selection-container');
const viewport = document.getElementById('viewport');
const stage = document.getElementById('stage');
const books = document.querySelectorAll('.book');
const scriptView = document.getElementById('script-view');
const closeButton = document.getElementById('close-button');
const scriptBody = document.getElementById('script-body');
const tooltip = document.getElementById('episode-tooltip');
const tooltipTitle = document.getElementById('tooltip-title');
const tooltipDescription = document.getElementById('tooltip-description');


// --- 2) Îç∞Ïù¥ÌÑ∞ Î∞è ÏÉÅÌÉú ---
const gutSounds = [ 'stomachache/stomachache1.wav', 'stomachache/stomachache2.wav', 'stomachache/stomachache3.wav' ];
const fartSoundFiles = [ 'fart/fart1.wav','fart/fart2.wav','fart/fart3.wav','fart/fart4.wav','fart/fart5.wav', 'fart/fart6.wav','fart/fart7.wav','fart/fart8.wav','fart/fart9.wav','fart/fart10.wav' ];
const fartAudioObjects = [];

const dialogueScripts = [
  { id: 'script1', title: 'ÎÑ∑ÌîåÎ¶≠Ïä§ ÏòÅÌôî', audio: 'script/script1.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=0&single=true&output=csv' },
  { id: 'script2', title: 'ÏóÑÎßàÏùò ÍπÄÏπò', audio: 'script/script2.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=2068191943&single=true&output=csv' },
  { id: 'script3', title: 'Î∞∞Îã¨ÏùåÏãù', audio: 'script/script3.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=1227841480&single=true&output=csv' },
  { id: 'script4', title: 'ÎìúÎùºÎßà', audio: 'script/script4.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=1676990360&single=true&output=csv' },
  { id: 'script5', title: 'Ïπ¥Ìéò ÏïÑÏù¥', audio: 'script/script5.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=688393908&single=true&output=csv' },
  { id: 'script6', title: 'ÏßÄÌïòÏ≤† ÏûÑÏÇ∞Î∂ÄÏÑù', audio: 'script/script6.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=1304351853&single=true&output=csv' },
  { id: 'script7', title: 'Ï†ÑÎã®ÏßÄ', audio: 'script/script7.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=547083201&single=true&output=csv' },
  { id: 'script8', title: 'Ïó¥Ï∞® Ïïà Ï∑®Ïãù', audio: 'script/script8.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=872724876&single=true&output=csv' },
  { id: 'script9', title: 'ÎèÑÏÑúÍ¥Ä Ìú¥Í≤åÏã§', audio: 'script/script9.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=111726340&single=true&output=csv' },
  { id: 'script10', title: 'Ïπ¥Ìéò Ïπ¥Í≥µÏ°±', audio: 'script/script10.mp3', themeDataUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTTnIXJLuha9CHeYHNepS8e2maKlpqPdJXMGWjVW0Jd4F9ucdBozsp54WoLoBxYwG_sfniKt3ybNHnh/pub?gid=1641761476&single=true&output=csv' }
];
const episodeDescriptions = {
  "ÎÑ∑ÌîåÎ¶≠Ïä§ ÏòÅÌôî": "Í∑∏Ïùò ÏãúÏÑ†ÏùÄ ÏãùÏñ¥Î≤ÑÎ¶∞ Ïª§Ìîº ÏûîÏóê Î®∏Î¨ºÎ†ÄÎã§. Ìá¥Í∑º ÌõÑÏóêÎèÑ Í∫ºÏßÄÏßÄ ÏïäÎäî Î™®ÎãàÌÑ∞Ïùò Î∂àÎπõ, ÏùòÎØ∏ ÏóÜÏù¥ ÌùòÎü¨Í∞ÄÎäî Ïû•Î©¥Îì§ ÏÜçÏóêÏÑú Í∞êÏ†ïÏù¥ ÎßàÎ™®ÎêòÏñ¥ Í∞ÄÎäî Í∏∞Î∂ÑÏóê ÎåÄÌï¥ ÌÑ∏Ïñ¥ÎÜìÏïòÎã§. Í∑∏ Í≥µÌóàÌï®Ïùò ÎÅùÏóê Í∑∏Îäî ÎÇòÎ•º Î≥¥Î©∞ Ïπ®Î¨µÏúºÎ°ú ÎèôÏùòÎ•º Íµ¨ÌïòÍ≥† ÏûàÏóàÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "ÏóÑÎßàÏùò ÍπÄÏπò": "Í∑∏ÎÖÄÏùò Ïù¥ÏïºÍ∏∞Îäî Î©∞Ïπ†Ïß∏ ÌòÑÍ¥Ä ÏïûÏóê ÎÜìÏù∏ Ïä§Ìã∞Î°úÌèº ÏÉÅÏûêÏóêÏÑú ÏãúÏûëÎêòÏóàÎã§. ÎöúÍªëÏùÑ Ïó¥ÏßÄ ÏïäÏïÑÎèÑ ÎäêÍª¥ÏßÄÎäî ÏãúÌÅºÌïú ÎÉÑÏÉàÎäî ÏóÑÎßàÏùò Ï†ïÏÑ±Í≥º ÏûêÏã†Ïùò Ï£ÑÏ±ÖÍ∞êÏù¥ Îí§ÏÑûÏù∏ Í≤ÉÎßå Í∞ôÎã§Í≥† ÌñàÎã§. Í∑∏ Î¨¥Í±∞Ïö¥ Ïï†Ï†ï ÏïûÏóêÏÑú ÎßùÏÑ§Ïù¥Îäî ÏûêÏã†Ïù¥ Ïù¥ÏÉÅÌïú Í±∞ÎÉêÎäî ÎìØ ÎÇòÎ•º Î∞îÎùºÎ¥§Îã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "Î∞∞Îã¨ÏùåÏãù": "Í∑∏ÎÖÄÎäî ÎèºÏßÄÍ≥†Í∏∞Í∞Ä Îë•Îë• Îñ†Îã§ÎãàÎäî Íµ≠Î∞• Í∑∏Î¶áÏùÑ Î∞ÄÏñ¥ÎÇ¥Î©∞ Í∏¥ ÌïúÏà®ÏùÑ Ïâ¨ÏóàÎã§. ÏùåÏãùÍ∞íÎ≥¥Îã§ ÎπÑÏãº ÎπÑÏö©ÏùÑ ÏπòÎ•¥Í≥†ÎèÑ ÎßàÏùå ÌïúÍµ¨ÏÑùÏù¥ Ï±ÑÏõåÏßÄÏßÄ ÏïäÎäî, Ïù¥ ÌóàÎ¨¥Ìïú Í±∞ÎûòÏóê ÎåÄÌïú Ïù¥ÏïºÍ∏∞ÏòÄÎã§. ÎßàÏπò ÏÑ∏ÏÉÅ Ï†ÑÏ≤¥Í∞Ä Í∑∏Îü∞ Î∂ÄÏ°∞Î¶¨Î°ú Í∞ÄÎìù Ï∞¨ Í≤É Í∞ôÎã§Îäî Í∑∏ÎÖÄÏùò ÎààÎπõÏù¥ ÎÇ¥Í≤å Ìñ•ÌñàÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "ÎìúÎùºÎßà": "ÏÉàÎ≤ΩÍπåÏßÄ Ïù¥Ïñ¥ÏßÑ ÎìúÎùºÎßàÏùò Ï†ïÏ†Å ÏÜçÏóêÏÑú Í∑∏ÎÖÄÎäî ÌôÄÎ°ú ÎÇ®Í≤®Ï°åÎã§. Î™®ÎëêÍ∞Ä ÏõÉÍ≥† Ïö∞Îäî ÏßÄÏ†êÏóêÏÑú ÏïÑÎ¨¥Í≤ÉÎèÑ ÎäêÎÅºÏßÄ Î™ªÌïòÎäî ÏûêÏã†ÏùÑ Î∞úÍ≤¨ÌñàÎã§Í≥† ÌñàÎã§. Í∑∏ ÎÇØÏÑ† Í∞êÏ†ïÏ†Å Ïù¥ÏßàÍ∞ê ÏÜçÏóêÏÑú ÌòπÏãú ÎÇò ÎòêÌïú Í∑∏Îü∞ Í≤ΩÌóòÏù¥ ÏûàÎäîÏßÄ Í∂ÅÍ∏àÌï¥ÌïòÎäî ÎìØÌñàÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "Ïπ¥Ìéò ÏïÑÏù¥": "Í∑∏Îäî Í¥ÄÏûêÎÜÄÏù¥Î•º Íæπ ÎàÑÎ•¥Î©∞ Ï£ºÎßê Ïò§ÌõÑÏùò ÏÜåÏùåÏóê ÎåÄÌï¥ Ïù¥ÏïºÍ∏∞ÌñàÎã§. Ï±ÖÏû•ÏùÑ ÎÑòÍ∏∞ÏßÄ Î™ªÌïòÍ≤å ÎßåÎì§ÏóàÎçò ÏïÑÏù¥Ïùò ÏõÉÏùåÏÜåÎ¶¨. Í∑ÄÏó¨ÏõÄÍ≥º ÏÜåÏùåÏùò Í≤ΩÍ≥ÑÏóêÏÑú Í∏∏ÏùÑ ÏûÉÏùÄ ÏûêÏã†Ïùò ÏòàÎØºÌï®Ïù¥ ÌòπÏãú Ïú†Î≥ÑÎÇú Í≤ÉÏù∏ÏßÄ ÎÇ¥Í≤å Î¨ªÍ≥† Ïã∂ÏùÄ ÌëúÏ†ïÏù¥ÏóàÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "ÏßÄÌïòÏ≤† ÏûÑÏÇ∞Î∂ÄÏÑù": "Í∑∏Ïùò Ïù¥ÏïºÍ∏∞Îäî ÌÖÖ Îπà Î∂ÑÌôçÏÉâ Ï¢åÏÑùÏóê Ïû†Ïãú Î™∏ÏùÑ Í∏∞ÎåîÎçò Ïñ¥Îäê ÎÇ†Ïùò Í∏∞ÏñµÏù¥ÏóàÎã§. ÏïÑÎ¨¥ÎèÑ Î≠êÎùº ÌïòÏßÄ ÏïäÏïòÏßÄÎßå, Îì± Îí§Î°ú ÏèüÏïÑÏßÄÎäî ÎìØÌïú ÏÉÅÏÉÅ ÏÜç ÏãúÏÑ†Îì§Ïóê Ïò®Î™∏Ïù¥ Íµ≥Ïñ¥Î≤ÑÎ†∏Îã§Í≥† ÌñàÎã§. Í∑∏ ÏûëÏùÄ Ïù¥Í∏∞Ïã¨ Ï†ïÎèÑÎäî Í¥úÏ∞ÆÏùÄ Í≤É ÏïÑÎãàÎÉêÎ©∞ Í∑∏Îäî ÎÇ¥Í≤å ÏïîÎ¨µÏ†ÅÏù∏ ÏßÄÏßÄÎ•º Î∞îÎùºÍ≥† ÏûàÏóàÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "Ï†ÑÎã®ÏßÄ": "Í∑∏ÎÖÄÎäî Ï∂úÍ∑ºÍ∏∏Ïóê ÏÜêÏóê Ï•êÏñ¥Ï°åÎçò ÏñáÏùÄ Ï¢ÖÏù¥Ïùò Í∞êÏ¥âÏùÑ ÏÑ§Î™ÖÌñàÎã§. Í∑∏Í≤ÉÏùÑ Íµ¨Í≤®Î≤ÑÎ¶∞ ÏàúÍ∞ÑÏùò ÌõÑÎ†®Ìï®Í≥º Í∑∏ Îí§Ïóê Ï∞æÏïÑÏò® ÎØ∏Î¨òÌïú Ï£ÑÏ±ÖÍ∞ê ÏÇ¨Ïù¥ÏóêÏÑú Í∏∏ÏùÑ ÏûÉÏóàÎã§Í≥† ÌñàÎã§. Í∑∏ Î≥µÏû°Ìïú Í∞êÏ†ïÏùò Ïù¥Î¶ÑÏùÑ ÎÇò Ïó≠Ïãú ÏïåÍ≥† ÏûàÏùÑ Í±∞Îùº Í∏∞ÎåÄÌïòÎäî ÎààÏπòÏòÄÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "Ïó¥Ï∞® Ïïà Ï∑®Ïãù": "Í∑∏ÎÖÄÏùò Í∏∞Ïñµ ÏÜçÏóêÏÑú Í≥†ÏöîÌïú Ïó¥Ï∞® ÏïàÏùò ÍπÄÎ∞• ÎπÑÎãê ÏÜåÎ¶¨Îäî Ïú†ÎÇúÌûà ÏÜåÎûÄÏä§Îü¨Ïõ†Îã§. ÌóàÍ∏∞Î•º Ï±ÑÏö∞Îäî ÌñâÏúÑÍ∞Ä ÎßàÏπò ÌÅ∞ ÏûòÎ™ªÏ≤òÎüº ÎäêÍª¥ÏßÄÍ≤å ÌñàÎçò Í∑∏ Î¨¥Ïñ∏Ïùò ÏïïÎ∞ïÍ∞ê. ÏûêÏã†Ïùò Ïú†ÎÇúÏä§Îü¨ÏõÄÏùÑ Ïù¥Ìï¥Î∞õÍ≥† Ïã∂Îã§Îäî ÎìØ Í∑∏ÎÖÄÎäî Ï°∞Ïã¨Ïä§ÎüΩÍ≤å ÎßêÎÅùÏùÑ ÌùêÎ†∏Îã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "ÎèÑÏÑúÍ¥Ä Ìú¥Í≤åÏã§": "Ìú¥Í≤åÏã§Ïùò ÎÇòÏßÄÎßâÌïú ÏÜåÏùå ÏÜç Í∑∏Îäî ÏûêÏã†Ïùò Î™©ÏÜåÎ¶¨Í∞Ä Ïú†ÎèÖ ÌÅ¨Í≤å Ïö∏Î†∏Îçò ÏàúÍ∞ÑÏùÑ Îñ†Ïò¨Î†∏Îã§. Ï£ºÎ≥ÄÏùò Î¨¥Ïã¨Ìïú ÏãúÏÑ†Ïù¥ Î≥¥Ïù¥ÏßÄ ÏïäÎäî Î≤ΩÏ≤òÎüº ÎäêÍª¥ÏßÄÏûê ÌïòÎ†§Îçò ÎßêÎì§Ïù¥ Î™©Íµ¨Î©ç ÏïàÏúºÎ°ú ÏÇ¨ÎùºÏ°åÎã§Í≥† ÌñàÎã§. Í∑∏ Í∞ÅÎ∞ïÌïú Ïπ®Î¨µÏù¥ ÎπÑÎã® ÏûêÏã†ÎßåÏùò Í≤ΩÌóòÏùÄ ÏïÑÎãê Í±∞ÎùºÎ©∞ ÎÇòÎ•º Î∞îÎùºÎ¥§Îã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå...",
  "Ïπ¥Ìéò Ïπ¥Í≥µÏ°±": "Í∑∏Îäî Ïπ¥Ìéò Íµ¨ÏÑù ÏûêÎ¶¨Î•º ÌÑ± ÎÅùÏúºÎ°ú Í∞ÄÎ¶¨ÌÇ§Î©∞ ÎÇòÏóêÍ≤åÎßå Îì§Î¶¥ ÎìØÌïú Î™©ÏÜåÎ¶¨Î°ú ÏÜçÏÇ≠ÏòÄÎã§. ÌïòÎ£® Ï¢ÖÏùº ÏûêÎ¶¨Î•º ÏßÄÌÇ§Îäî Ï†Ä ÎªîÎªîÌï®Ïù¥ ÎïåÎ°úÎäî Î∂ÄÎüΩÍ∏∞ÍπåÏßÄ ÌïòÎã§Îäî ÏûêÏã†Ïùò ÏÜçÎÇ¥Î•º ÌÑ∏Ïñ¥ÎÜìÏïòÎã§. Í∑∏ ÌòºÎûÄÏä§Îü¨Ïö¥ Í∞êÏ†ïÏóê ÎåÄÌïú ÎÇòÏùò ÌåêÎã®ÏùÑ Í∏∞Îã§Î¶¨Îäî ÎìØÌñàÎã§. ÎÇòÎäî Î≠êÎùºÍ≥† ÎßêÏùÑ Ìï¥Ïïº Ìï†Íπå..."
};
const aiRecommendations = {
  script1: [ "Í∑∏ ÎªîÌï®ÏóêÏÑú Ïò§ÌûàÎ†§ ÏúÑÏïàÏùÑ ÏñªÏóàÎçò Í∏∞ÏñµÏùÑ Í∫ºÎÇ¥Î≥ºÍπåÏöî?", "Í∑∏ Í≥µÌóàÌï®ÏùÑ ÎÇòÏùò Í≤ΩÌóòÏóê ÎπóÎåÄÏñ¥ ÎßûÏû•Íµ¨ Ï≥êÎ≥º Ïàò ÏûàÏñ¥Ïöî.", "ÎäêÍºàÎçò Í∞êÏ†ïÏùÑ ÏÉâÍπîÏù¥ÎÇò Î¨¥Í≤åÎ°ú Î¨òÏÇ¨Ìï¥Î≥¥Îäî Í±¥ Ïñ¥Îñ®ÍπåÏöî?" ],
  script2: [ "Í∑∏ Ïù¥ÏïºÍ∏∞Î•º Îì§ÏúºÎ©∞ Îì† ÏÉùÍ∞ÅÏùÑ Îî∞ÎúªÌïú ÏÉâÍπîÏù¥ÎÇò Ïò®ÎèÑÎ°ú Î¨òÏÇ¨Ìï¥Î≥ºÍπåÏöî?", "ÎÇòÎèÑ ÎπÑÏä∑ÌïòÍ≤å Î∂ÄÎã¥ÏùÑ ÎäêÍºàÎçò Îã§Î•∏ Í≤ΩÌóòÏóê ÎπóÎåÄÏñ¥ ÎßêÌïòÎäî Î∞©Î≤ïÏù¥ ÏûàÎãµÎãàÎã§.", "Í∑∏ Î≥µÏû°Ìï®ÏùÑ Ïñ¥Îñ§ ÎßõÏù¥ÎÇò Î¨¥Í≤åÏóê ÎπóÎåÄÏñ¥ ÌëúÌòÑÌï¥Î≥º ÏàòÎèÑ ÏûàÏñ¥Ïöî." ],
  script3: [ "ÎçïÎ∂ÑÏóê Ìé∏ÌñàÎçò Í≥ºÍ±∞Ïùò Í∏∞ÏñµÏù¥ÎÇò Í≥†ÎßàÏõÄÏùÑ Í∫ºÎÇ¥Î≥ºÍπåÏöî?", "ÎπÑÏä∑ÌïòÍ≤å Î∂àÏæåÌñàÍ±∞ÎÇò ÌôîÍ∞Ä ÎÇ¨ÏùÑ ÎïåÏùò ÎäêÎÇåÏùÑ ÎçßÎ∂ôÏó¨ ÎßêÌï¥Î≥º Ïàò ÏûàÏñ¥Ïöî.", "Í∑∏ Î∂àÎßåÏù¥ ÎÇ¥Í≤å Ïñ¥Îñ§ ÌñâÎèôÏùÑ ÌïòÍ≥† Ïã∂Í≤å ÎßåÎì§ÏóàÎäîÏßÄ ÏßöÏñ¥Î≥¥Îäî Í≤ÉÎèÑ Ï¢ãÏïÑÏöî." ],
  script4: [ "ÎπÑÏä∑Ìïú Î†àÌååÌÜ†Î¶¨Í∞Ä Ïò§ÌûàÎ†§ ÏúÑÏïàÏù¥ ÎêêÎçò ÎÇòÏùò Í∏∞ÏñµÏùÑ Í∫ºÎÇ¥Î≥ºÍπåÏöî?", "Ï†ÑÎã¨Îêú ÎåÄÌôîÍ∞Ä ÎÇ¥Í≤å Ïñ¥Îñ§ ÏòÅÌôî ÏÜç Ïû•Î©¥Ï≤òÎüº ÎäêÍª¥Ï°åÎäîÏßÄ Î¨òÏÇ¨Ìï¥Î≥¥ÏÑ∏Ïöî.", "ÎßûÏû•Íµ¨Î•º Ï≥§ÏùÑ ÎïåÏùò ÎäêÎÇåÏùÑ ÎêòÏßöÏñ¥ ÎßêÌï¥Î≥¥Îäî Í±¥ Ïñ¥Îñ®ÍπåÏöî?" ],
  script5: [ "ÌôúÍ∏∞Ï∞¨ Î∂ÑÏúÑÍ∏∞ÏóêÏÑú ÎäêÎÇÄ ÏÉùÎèôÍ∞êÏùÑ ÎäêÍºàÎçò Í∏∞ÏñµÏùÑ Î¨òÏÇ¨ÌïòÎäî Î∞©Î≤ïÏù¥ ÏûàÏñ¥Ïöî", "Í∑∏ ÏÜåÏùåÏùÑ Ïñ¥Îñ§ Î™®ÏñëÏù¥ÎÇò ÌòïÌÉúÎ°úÎ°ú ÌëúÌòÑÌï¥Î≥¥Îäî Í±¥ Ïñ¥Îñ®ÍπåÏöî?", "Ïù∏ÏÉÅÍπäÏóàÎçò Ï±ÖÏùò Íµ¨Ï†àÎ°ú ÎÇ¥ ÏÉùÍ∞ÅÏùÑ ÌëúÌòÑÌïòÎäî Î∞©Î≤ïÏù¥ ÏûàÎãµÎãàÎã§." ],
  script6: [ "ÌîºÍ≥§Ìï®ÏùÑ ÎäêÎÇÑ ÎïåÏùò Î™∏Ïùò ÎäêÎÇåÏùÑ ÏÇ¨Î¨ºÏóê ÎπóÎåÄÏñ¥ Í≥µÍ∞êÌï¥Î≥ºÍπåÏöî?", "Îã§Î•∏ ÏÇ¨ÎûåÎì§Ïùò ÎßêÏùÑ Ïù∏Ïö©Ìï¥ÏÑú Î∞òÎåÄ ÏùòÍ≤¨ÏùÑ ÎßêÌï¥Î≥º Ïàò ÏûàÏñ¥Ïöî.", "ÏÉàÎ°úÏö¥ Ï£ºÏ†úÍ∞Ä Îòê Îã§Î•∏ Î∂ÑÏúÑÍ∏∞Î•º ÌòïÏÑ±Ìï† Ïàò ÏûàÎãµÎãàÎã§." ],
  script7: [ "Í∑∏ ÏÇ¨ÎûåÏùò ÌëúÏ†ïÏùÑ ÏÉÅÏÉÅÌïòÎ©∞ Îì† ÏÉùÍ∞ÅÏùÑ ÎßêÌï¥Î≥ºÍπåÏöî?", "ÏñµÎàåÎ†ÄÎçò Ï∂©ÎèôÏùò Îã§Î•∏ Í≤ΩÌóòÏùÑ Í∫ºÎÇ¥Î≥¥Îäî Í±¥ Ïñ¥Îñ®ÍπåÏöî?", "ÌõÑÎ†®Ìï®Í≥º ÎØ∏ÏïàÌï®Ïù¥ ÎÇ¥ ÏïàÏóêÏÑú ÏóáÍ∞àÎ¶¨Îäî ÏàúÍ∞ÑÏùÑ Î¨òÏÇ¨Ìï¥Î≥¥ÏÑ∏Ïöî." ],
  script8: [ "Î∞∞Í≥†ÌîîÏù¥ Îçî Ïª∏Îçò Í≤ΩÌóòÏùÑ Îñ†Ïò¨Î¶¨Î©∞ ÎßêÌï¥Î≥ºÍπåÏöî?", "Í∑∏ ÎÉÑÏÉàÍ∞Ä Ïñ¥ÎñªÍ≤å ÎäêÍª¥Ï°åÏùÑÏßÄ ÌÉÄÏù∏Ïùò Í∞êÍ∞ÅÏúºÎ°ú Î¨òÏÇ¨Ìï¥Î≥¥ÏÑ∏Ïöî.", "ÎØºÎßùÌï®ÏùÑ Ïñ¥Îñ§ Ïò®ÎèÑÎÇò ÏÉâÍπîÏóê ÎπóÎåÄÏñ¥ ÌëúÌòÑÌï¥Î≥ºÍπåÏöî?" ],
  script9: [ "Ìú¥Í≤åÏã§ÏóêÏÑú Ìé∏ÏïàÌï®ÏùÑ ÎäêÍºàÎçò Í∏∞ÏñµÏùÑ Í∫ºÎÇ¥Î≥ºÍπåÏöî?", "Ï°∞Ïö©Ìï®ÏùÑ ÏõêÌñàÎçò ÌÉÄÏù∏Ïùò ÏûÖÏû•ÏùÑ ÏÉÅÏÉÅÌïòÎ©∞ ÎßêÌï¥Î≥¥ÏÑ∏Ïöî.", "ÏÇ¨ÎûåÎì§Ïùò ÏãúÏÑ†ÏùÑ Ïñ¥Îñ§ Î™®ÏñëÏù¥ÎÇò Í∞êÏ¥âÏóê ÎπóÎåÄÏñ¥ ÌëúÌòÑÌï¥Î≥ºÍπåÏöî?" ],
  script10: [ "Î™∞ÏûÖÌñàÎçò ÏàúÍ∞ÑÏùÑ Î¨òÏÇ¨Ìï¥Î≥ºÍπåÏöî?", "ÌÉÄÏù¥Ìïë ÏÜåÎ¶¨Ï≤òÎüº Í∞ÄÏû• Í±∞Ïä¨Î†∏Îçò Í∞êÍ∞ÅÏùÑ Î¨òÏÇ¨Ìï¥Î≥¥ÏÑ∏Ïöî.", "ÏßúÏ¶ùÍ≥º Î∂ÄÎü¨ÏõÄÏù¥ ÎÇ¥ ÏïàÏóêÏÑú ÏóáÍ∞àÎ†∏Îçò ÏàúÍ∞ÑÏùÑ Î¨òÏÇ¨Ìï¥Î≥¥ÏÑ∏Ïöî." ]
};

const particleFragments = {
  script1: [ "ÏïÑ Îòê Í∑∏ ÏñòÍ∏∞ÎÑ§", "Ïû¨Î∞åÎçòÎç∞", "Î≠ò Î™®Î•¥ÎÑ§", "ÎÇòÎäî Ï¢ãÏïòÏñ¥ Í∑∏ Ïû•Î©¥", "Í∑∏Í±¥ Ïù∏Ï†ï", "Í∑∏Îü¥Í±∞Î©¥ Ïôú Î¥ê?", "Î∞òÎ∞ïÌï¥Î¥§Ïûê ÌîºÍ≥§Ìï¥", "Í∑∏ÎÉ• ÏõÉÍ≥† ÎÑòÍ∏∞Ïûê", "ÏóêÌú¥ Îã§ ÎòëÍ∞ôÍ∏¥ Î≠êÍ∞Ä ÎòëÍ∞ôÏïÑ", "ÎÅùÍπåÏßÄ Î≥¥ÏßÄÎèÑ ÏïäÍ≥†?", "ÏïÑ ÌîºÍ≥§Ìï¥", "Ï†ÄÎÖÅ Î≠ê Î®πÏßÄ", "Ïúº", "Ïñ¥ÌõÑ Ï≥êÏßÑÎã§", "Í∞êÎèÖ ÏùòÎèÑÎäî Îã§Î•¥ÏßÄ ÏïäÏïòÎÇò?", "ÎßêÌïòÎ©¥ Ïã´Ïñ¥ÌïòÎ†§ÎÇò", "Îã§Îì§ Í∑∏Î†áÏßÄ Î≠ê", "ÏßÄÎ£®Ìï¥", "Ïùå.. Í∑∏Í±¥ Îòê Í∑∏Î†áÎÑ§", "ÎÇòÎßå Í∑∏Îü∞ Ï§Ñ", "ÏöîÏ¶ò ÏßÑÏßú Îã§ ÎπÑÏä∑ÌïòÍ∏¥ Ìï¥", "Í∞ëÏûêÍ∏∞ Ïôú Ï†Ä ÏñòÍ∏∞Î•º?", "Ïôú ÎÇòÌïúÌÖå Ïù¥Îûò", "Î≥ºÎßå ÌïòÎçòÎç∞", "Í∑∏Îüº Î≥¥ÏßÄ ÎßêÎì†Í∞Ä", "Ï¢Ä ÏßïÏßïÎåÄÎäî Í≤É Í∞ôÏïÑ", "ÏöîÏ¶ò Îã§ Í∑∏Îûò", "Ï†Ä ÏÇ¨ÎûåÏùÄ Ï∑®Ìñ•Ïù¥ ÌôïÍ≥†ÌïòÎÑ§", "ÎÇòÎäî Í∑∏ÎÉ• ÏïÑÎ¨¥Í±∞ÎÇò Î≥¥ÎäîÎç∞", "Ï†ÄÎ†áÍ≤åÍπåÏßÄ ÏÉùÍ∞ÅÌïúÎã§Í≥†?", "Í∑∏ÎÉ• ÏÉùÍ∞Å ÏóÜÏù¥ Î≥¥ÎäîÍ±∞ÏßÄ Î≠ê", "Í∞êÏ†ïÏÜåÎ™® ÌïòÍ∏∞ Ïã´Ïñ¥", "ÌòÑÏã§ÎèÑ ÌîºÍ≥§ÌïúÎç∞", "ÏòÅÌôîÎäî ÏòÅÌôîÏùº Îøê", "ÎÑàÎ¨¥ Í≥ºÎ™∞ÏûÖÌïòÎäî Í±∞ ÏïÑÎãàÏïº?", "Ï†ÄÎü∞ ÏÇ¨ÎûåÏù¥ ÌèâÎ°†Í∞Ä ÌïòÎÇò", "ÏãúÍ∞Ñ ÏïÑÍπùÎã§", "Îã§Î•∏ ÏñòÍ∏∞ ÌïòÍ≥† Ïã∂Îã§", "Í∑∏ÎûòÏÑú Í≤∞Î°†Ïù¥ Î≠îÎç∞", "Ìï∏ÎìúÌè∞ Î≥¥Í≥† Ïã∂Îã§" ],
  script2: [ "Ïñ¥Î®∏Îãà ÏÉùÍ∞Å Ï¢Ä ÌïòÏßÄ", "Ìïò Í¥úÌûà Ïö∏Ïª•ÌñàÎã§", "ÏóÑÎßàÌïúÌÖå Ïó∞ÎùΩ Ï¢Ä Ìï†Íπå", "Í≥†ÎßàÏö¥ Ï§ÑÎèÑ Î™®Î•¥ÎÑ§", "Î∞∞Í≥†ÌååÏßÑÎã§", "ÏöîÏÉà ÍπÄÏπòÍ∞íÏù¥ ÎπÑÏåÄÌÖêÎç∞", "Ïö∏ Ïñ¥Î®∏Îãà Ïù¥Î≤à ÎÖÑÎèÑÏóê ÍπÄÏû• ÌïòÏãúÎ†§ÎÇò", "Ï¥ùÍ∞ÅÍπÄÏπò Îï°Í∏∞ÎÑ§", "ÏóÑÎßà Î≥¥Í≥†Ïã∂ÎÑ§", "Í∑∏Í±∏ Ïôú Î≤ÑÎ†§", "ÎÇò Ï£ºÏßÄ", "Îã¨ÎùºÍ≥† Ìï†Íπå", "Ïß†ÌïòÎã§", "ÏÇ¨Î®πÎäî Í±∞ÎûëÏùÄ ÏôÑÏ†Ñ Îã§Î•¥ÏßÄ", "ÎÉÑÏÉàÍ∞Ä Í∑∏Î†áÍ≤å Ïã¨ÌïúÍ∞Ä?", "ÌïúÎ≤à Íµ∂Ïñ¥Î¥êÏïº Ï†ïÏã† Ï∞®Î¶¨Í≤†ÎÑ§", "ÏãúÌÅºÌïú Í≤å Ï∞∏ÎßõÏù∏Îç∞", "ÏßÄÍ∏à Î™á ÏãúÏßÄ?", "Í∑∏ÎûòÎèÑ Ï†ïÏÑ±Ïù∏Îç∞", "Ïö∞Î¶¨ ÏóÑÎßàÎèÑ Ï†ÄÎü¨ÏãúÎäîÎç∞", "Î∞õÏïÑÏ£ºÎäî Í≤ÉÎßåÏúºÎ°úÎèÑ Ìö®ÎèÑÏïº", "ÎÇòÏ§ëÏóî Í∑∏Î¶¨Ïö∏ÌÖêÎç∞", "Ï†Ä ÎßàÏùå Ïù¥Ìï¥Îèº", "ÎÇòÎèÑ Ï†ÄÎü¥ Îïå ÏûàÏñ¥", "Í±∞Ï†àÌïòÎäîÍ≤å Îçî ÌûòÎì§Ïñ¥", "ÏÜîÏßÅÌïòÍ≤å ÎßêÌïòÎäîÍ≤å ÎßûÎÇò?", "Ïù¥Í≤ÉÎèÑ ÏÇ¨ÎûëÏù∏Îç∞", "Ïôú Í∏∞ÏÅòÏßÄÍ∞Ä ÏïäÏßÄ", "ÏóÑÎßàÏùò ÎßàÏùå", "ÏûêÏãù ÌÇ§ÏõåÎ¥êÏïº ÏïåÏßÄ", "ÍπÄÏπòÏ∞åÍ∞ú Î®πÍ≥† Ïã∂Îã§", "ÎÇòÏ§ëÏóê ÌõÑÌöåÌï†ÌÖêÎç∞", "ÌëúÏ†ï Í¥ÄÎ¶¨ ÏïàÎêòÎÑ§", "Ïù¥Ï†ú Í∑∏Îßå ÏñòÍ∏∞ÌñàÏúºÎ©¥" ],
  script3: [ "ÏßÄÍ∏à Î™á ÏãúÏßÄ?", "Ïò§ÎäòÏùÄ ÎÇòÎèÑ Î∞∞Îã¨ÏãúÏºúÏïºÍ≤†Îã§", "Î∞∞Îã¨ÎπÑ Î¨¥Î£åÏï± ÏûàÎäîÎç∞", "ÎÑàÎ¨¥ ÏâΩÍ≤å ÌåêÎã®ÌïòÎÑ§", "ÏïÑ Í∞ëÏûêÍ∏∞ ÌîºÍ≥§ÌïòÎã§", "Ïúº‚Ä¶ ÏôúÏù¥Î†áÍ≤å ÏòàÎØºÌï¥", "Îì£Í∏∞ Î∂àÌé∏Ìï¥", "Ïâ¨Ïö¥ Í≤å Ïñ¥Îî®Ïñ¥", "ÎßêÌïòÎ©¥ Í∏∞Î∂Ñ ÎÇòÎπ†ÌïòÍ≤†ÏßÄ", "Ïùå Í∑∏Îü∞Í∞Ä?", "Í∑∏ÎÉ• Ï∞∏Ïûê", "Í∑∏Í±¥ Ïù∏Ï†ï", "Í∑∏ ÎßêÏùÄ Ï¢Ä Í≥µÍ∞ê Îèº", "ÏïÑ Ïò§Îäò Ï†êÏã¨ Î≠ê Î®πÏßÄ", "Ï°∞Í∏à Ïò§Î∞îÍ∞Ä Ïã¨ÌïòÎÑ§", "Í∞ëÏûêÍ∏∞ Íµ≠Î∞• Î®πÍ≥† Ïã∂Îã§", "ÏßÅÏ†ë Ìï¥Î¥§ÎÇò?", "ÏÇ¨Ïû•ÎãòÏùÄ Î≠î Ï£ÑÏïº", "ÎπÑ Ïò§Î©¥ ÏúÑÌóòÌïúÎç∞‚Ä¶", "Í∑∏ÎÉ• ÎÇòÍ∞ÄÏÑú Î®πÏúºÎ©¥ ÎêòÏûñÏïÑ", "Í∑∏ÎÉ• ÏûàÏûê", "Ïù¥ ÏÇ¨Îûå ÏßÄÍ∏à ÎßéÏù¥ ÏåìÏòÄÍµ¨ÎÇò", "Í∑∏ÎÉ• ÎÑòÍ∏∞Ïûê", "ÌîºÍ≥§ÌïòÎã§", "ÎßûÏïÑ Î∞∞Îã¨ÎπÑ ÎÑàÎ¨¥ ÎπÑÏã∏", "ÏÑ∏ÏÉÅÏóê ÎãπÏó∞Ìïú Í±¥ ÏóÜÏßÄ", "Î≥∏Ïù∏ÎèÑ ÌöåÏÇ¨ Îã§ÎãàÎ©¥ÏÑú", "Í∑∏Î†áÍ≤å ÎßêÌïòÎ©¥ ÏïàÎêòÏßÄ", "ÎÇòÎèÑ Ï†ÄÎü∞ Ï†Å ÏûàÎäîÎç∞", "ÏÑ∏ÏÉÅ Î¨ºÏ†ï Î™®Î•¥ÎÑ§", "Í∑∏Î†áÍ≤å Î∂àÎßåÏù¥Î©¥ ÏßÅÏ†ë Î∞∞Îã¨ÌïòÏßÄ", "ÎßêÏù¥ ÎÑàÎ¨¥ Ïã¨ÌïòÎã§", "ÏÑ∏ÏÉÅ ÌÉìÎßå ÌïòÎÑ§" ],
  script4: [ "Ïû¨Î∞åÎçòÎç∞", "ÏõêÎûò ÎìúÎùºÎßà Ïû•Î•¥Í∞Ä Í∑∏Îü∞Í±∞ÏßÄ", "Îì§ÏùÑÏàòÎ°ù Ïö∞Ïö∏Ìï¥ÏßÄÎÑ§", "ÎªîÌïòÍ∏¥ Ìï¥ÎèÑ Ïû¨Î∞åÏùÑ ÎïåÎèÑ ÏûàÏûñÏïÑ", "Í∑∏Í±∏ Îòê Í∑∏Î†áÍ≤å ÍπåÏïº Îèº?", "ÎßåÎì† ÏÇ¨Îûå ÏÑúÏö¥ÌïòÍ≤†Îã§", "Í∑∏Í≤å Í∑∏Î†áÍ≤å Í∞ÑÎã®Ìïú ÏñòÍ∏¥Í∞Ä", "Ïó¨Îü¨ Î≤à Î≥¥Î©¥ Îòê Îã§Î•ºÌÖêÎç∞", "ÎÇú Ïò§ÌûàÎ†§ Ìé∏ÌïòÎçòÎç∞", "Í∞êÏ†ïÏÑ† Îã®ÏàúÌïúÍ≤å ÎÇú Ï¢ãÏïÑ", "ÎÇòÎèÑ Í∞ÄÎÅî Í∑∏Î†áÍ≤å ÌïòÍ∏¥ Ìï¥", "ÎßêÌïòÎ©¥ Î∂ÑÏúÑÍ∏∞ Ïã∏Ìï¥ÏßÄÍ≤†ÏßÄ?", "ÎãµÎãµÌïòÎã§ ÏßÑÏßú", "Ìïò Ïà® ÎßâÌòÄ", "Îã§Î•∏ ÏñòÍ∏∞Ìï† Í±∞ ÏóÜÎÇò‚Ä¶", "ÏâΩÎã§ Ïâ¨Ïõå ÏÑ∏ÏÉÅÏù¥", "Í∑∏Í≤å Ï∞ΩÏûë ÏïÑÎãàÎ©¥ Î≠êÍ∞Ä Ï∞ΩÏûëÏù¥Ïïº", "ÎÑàÎ¨¥ÌïòÏãúÎÑ§", "Ïù¥Í≤ÉÎèÑ Ï∑®Ìñ• Ï∞®Ïù¥ÏßÄ", "ÌîºÍ≥§ÌïòÍ≤å ÏÇ¨ÎÑ§", "ÎßûÏû•Íµ¨ Ï≥êÏ£ºÎäî Í≤ÉÎèÑ ÌîºÍ≥§Ìï¥", "Ï†Ä ÏÇ¨ÎûåÏùÄ TÏùºÍπå?", "ÎÇòÎäî FÏù∏Îç∞", "Í∑∏ÎÉ• Í∑∏Îü∞Í∞ÄÎ≥¥Îã§ ÌïòÏûê", "Ï†ÄÎ†áÍ≤åÍπåÏßÄ Î∂ÑÏÑùÌïòÎ©¥ÏÑú Î≥∏Îã§Í≥†?", "ÎÇòÎäî Í∑∏ÎÉ• Î≥¥ÎäîÎç∞", "ÎìúÎùºÎßàÎäî ÎìúÎùºÎßàÏùº Îøê" ],
  script5: [ "Ïï†Í∞Ä Îõ∞ÎäîÍ≤å ÎãπÏó∞ÌïòÏßÄ", "Ï°∞Í∏à Í∞ÅÎ∞ïÌïòÏãúÎÑ§", "Ï¢Ä ÏßÄÎÇòÏ≥ê", "ÎÑàÎ¨¥ ÏòàÎØºÌïú Í±∞ ÏïÑÎãàÏïº?", "ÎÇòÎèÑ Í∞ÄÎÅî Í∑∏Îü∞ ÏÉùÍ∞ÅÏù¥ Îì§ÏßÄÎßå‚Ä¶", "Ï°∞Ïö©Ìïú Í≥≥Îßå Ï∞æÎäî Í≤ÉÎèÑ ÌîºÍ≥§ÌïòÏßÄ ÏïäÎÇò", "Ï†àÏóê Îì§Ïñ¥Í∞ÄÎäî Í≤ÉÎèÑ ‚Ä¶", "ÎßêÌïòÎ©¥ Ïù¥ÏÉÅÌïòÍ≤å ÏÉùÍ∞ÅÌïòÍ≤†ÏßÄ?", "ÏïÑ ÌîºÍ≥§Ìï¥", "Îì£Í∏∞ Í±∞Ïä¨Î¶∞Îã§", "Í∑∏Î†áÍ≤åÍπåÏßÄ ÏÉùÍ∞ÅÌïúÎã§Í≥†?", "Í≥µÍ∞êÏù¥ ÏïàÎêòÎäîÎç∞ Ï†ÑÌòÄ", "Í∞ÅÎ∞ïÌïú ÏÑ∏ÏÉÅÏù¥Îã§ Ï†ïÎßê‚Ä¶", "Ïñ∏Ï†úÍπåÏßÄ ÏñòÍ∏∞ÌïòÎ†§ÎÇò", "Î∂àÌé∏Ìï¥", "Í∑∏Îü¥ ÏàòÎèÑ ÏûàÏßÄ", "ÎÑàÎ¨¥ Í≥ºÎØºÎ∞òÏùëÏù∏Í∞Ä?", "Ïï†Îäî ÏõêÎûò ÏãúÎÅÑÎü¨Ïõå", "Î∂ÄÎ™®Í∞Ä Î¨∏Ï†úÏßÄ", "ÎÇòÎèÑ Ïï† ÎÇ≥ÏúºÎ©¥ Î≥ÄÌï†Íπå?", "Ï†Ä Îßê ÏßÑÏßú Î¨¥Î°ÄÌïòÎã§", "ÎÖ∏ÌÇ§Ï¶àÏ°¥Ïù¥ Í¥úÌûà ÏÉùÍ∏∞ÎäîÍ≤å ÏïÑÎãàÏïº", "Í∑∏ÎûòÎèÑ Ïï†Îäî Í∑ÄÏóΩÏûñÏïÑ", "Ïï†Îì§Ïù¥ÎãàÍπå Í∑∏Î†áÏßÄ", "Ïù¥Ìï¥Îäî Í∞ÄÎäîÎç∞", "Íµ≥Ïù¥ Ï†ÄÎ†áÍ≤åÍπåÏßÄ ÎßêÌï† ÌïÑÏöîÍ∞Ä ÏûàÎÇò", "Ï†Ä ÏÇ¨Îûå ÏïÑÏù¥ Ïã´Ïñ¥ÌïòÎÇòÎ¥ê" ],
  script6: [ "ÎÇ¥Í∞Ä ÎààÏπò Î≥¥Ïù¥ÎÑ§", "ÌïëÍ≥ÑÏßÄ", "Î∞∞Î†§Îäî ÌîºÍ≥§Ìï¥ÎèÑ ÌïòÎäî Í±∞ ÏïÑÎãåÍ∞Ä", "Ìïò, Îì£Í∏∞ Ï¢Ä Î∂àÌé∏ÌïòÎã§", "Î≠êÎùºÍ≥† ÌïòÎ©¥ Ïã´Ïñ¥ÌïòÍ≤†ÏßÄ", "ÎÇòÎèÑ ÌîºÍ≥§ÌïòÎã§", "ÎßêÏùÄ ÎßûÎäîÎç∞ Îì£Í∏∞ Í±∞Ïä¨Î¶¨ÎÑ§", "Î™®Î•¥Îäî Ï≤ô Ìï†Íπå", "Ïúº Í∞úÎò•Ï≤†Ìïô", "ÏïÖ Ìï©Î¶¨Ìôî Îì£Í∏∞ Ïã´Îã§!", "Îã§Îì§ ÌîºÍ≥§ÌïúÎç∞ Ï∞∏ÎäîÍ±¥Îç∞", "Ï†ÄÎ∂Ñ ÌûòÎì§Ïñ¥Î≥¥Ïù¥ÏãúÎÑ§", "Í∞ÄÎÅîÏùÄ Í∑∏Îü¥ ÎïåÎèÑ ÏûàÏßÄ ÎÇòÎèÑ", "ÏîÅÏì∏ÌïòÎÑ§", "ÏôÑÏ†Ñ ÌãÄÎ¶∞ ÎßêÎèÑ ÏïÑÎãàÏïº", "Ïò§Ï£ΩÌïòÎ©¥ Ï†ÄÎü¥Íπå", "Í∑∏ÎûòÎèÑ ÎπÑÏõåÎëêÎäîÍ≤å ÎßûÏßÄ ÏïäÎÇò", "Ï†Ä ÏÇ¨ÎûåÌïúÌÖå Î≠êÎùºÍ≥† Ìï† ÏûêÍ≤© ÏûàÎÇò?", "Í∑∏ÎÉ• Î™ª Î≥∏ Ï≤ô ÌïòÏûê", "ÏÑ∏ÏÉÅÏù¥ ÎÑàÎ¨¥ Í∞ÅÎ∞ïÌï¥", "ÎÇòÎùºÎèÑ ÎπÑÏõåÎë¨ÏïºÏßÄ", "ÏûêÍ∏∞Ìï©Î¶¨Ìôî ÎåÄÎ∞ïÏù¥Îã§", "ÎßêÌà¨Í∞Ä Ïôú Ï†ÄÎûò", "Í∑∏ÎÉ• Ï°∞Ïö©Ìûà ÏïâÏïÑÏûàÏúºÎ©¥ ÏïàÎêòÎÇò", "Íµ≥Ïù¥ Ï†ÄÎü∞ ÎßêÏùÑ" ],
  script7: [ "ÏôÄ ÎåÄÎã®ÌïòÎÑ§‚Ä¶", "Î≥¥Îäî ÏïûÏóêÏÑú?", "ÏûîÏù∏ÌïòÎã§", "Î∞õÍ∏∞ Ïã´ÏúºÎ©¥ Í∑∏ÎÉ• Í±∞Ï†àÌïòÏßÄ", "ÏßÑÏßú ÏÜîÏßÅÌïòÎã§", "Îì£Îäî ÎÇ¥Í∞Ä ÎØ∏ÏïàÌï¥ÏßÄÎÑ§", "Í∑∏ÎûòÎèÑ ÏïàÏì∞ÎüΩÏûñÏïÑ", "Ïó•?", "Í∑∏Í±¥ ÏïÑÎãàÏßÄ", "ÎÑàÎ¨¥ Í∞êÏ†ïÏ†ÅÏù¥Ïïº", "ÎãπÌô©Ïä§ÎüΩÎÑ§ ÎÑàÎ¨¥ Í±∞Ïπ®ÏóÜÎÑ§", "Ìï©Î¶¨Ìôî ÏßúÏ¶ùÎÇò", "Ï†ÄÍ≤å ÏûêÎûëÏù∏Í∞Ä?", "ÏïÑ Î®∏Î¶¨ ÏïÑÌåå", "Ï†ÄÍ±¥ Í∑∏ÎÉ• ÌôîÌíÄÏù¥Ïù∏Îç∞", "ÏÑ§Îßà ÏßÑÏßú Î≤ÑÎ†∏Í≤†Ïñ¥ ÎÜçÎã¥Ïù¥Í≤†ÏßÄ?", "Î≠êÎùº Î∞òÏùëÌï¥ÏïºÌïòÏßÄ", "ÏÜç ÏãúÏõêÌïòÍ∏¥ ÌïòÍ≤†Îã§", "ÎÇòÎèÑ Ï†ÄÎ†áÍ≤å Ìï¥Î≥ºÍπå", "Ï†Ä ÏÇ¨ÎûåÎèÑ ÌûòÎì§ÏóàÍ≤†ÏßÄ", "ÌïòÎ£®Ï¢ÖÏùº Ï†ÄÎü¨Í≥† ÏûàÏúºÎ©¥", "Í∑∏ÎûòÎèÑ Í∑∏Í±¥ Ï¢Ä Ïã¨ÌñàÎã§", "ÎÇòÎùºÎ©¥ Í∑∏ÎÉ• Î∞õÏïòÏùÑÌÖêÎç∞", "Ï†Ä ÏÇ¨Îûå Ïò§Îäò Î¨¥Ïä® Ïùº ÏûàÏóàÎÇò", "Î¨¥ÏÑúÏö¥ ÏÇ¨ÎûåÏù¥ÎÑ§" ],
  script8: [ "ÏïÑ ÎÉÑÏÉà..", "Ìïò, Í∏∞Ï∞® ÏïàÏù∏Îç∞ Ïôú Íµ≥Ïù¥", "Îàà Ï¢Ä Î∂ôÏù¥Í≥† Ïã∂ÏùÄÎç∞", "Ïñ∏Ï†ú ÎèÑÏ∞©ÌïòÏßÄ", "ÎÇ¥Í∞Ä Îã§ ÎààÏπò Î≥¥Ïù¥ÎÑ§", "Í¥úÌûà Î∂àÌé∏Ìï¥", "ÏïÑÏßÅ Î©ÄÏóàÎÇò?", "Î®πÏßÄ ÎßêÎùºÍ≥† Ìï†Íπå?", "ÏÜîÏßÅÌïòÍ≤å ÏñòÍ∏∞ÌïòÎ©¥ Ïã∏ÏõÄÎÇ† Í±∞ Í∞ôÏùÄÎç∞", "ÎÉÑÏÉà ÏùÄÍ∑º Ïò§ÎûòÍ∞àÌÖêÎç∞", "Î¨∏ Ïó¥Í≥† Ïã∂Îã§‚Ä¶", "Í∑∏ÎÉ• Ï∞∏Ïûê Ï∞∏ÏïÑ", "ÎßêÌïòÎ©¥ Ïïà Î®πÏùÑ Í±∞ ÏïÑÎãàÏûñÏïÑ?", "Í∑∏Îßå ÏñòÍ∏∞ÌïòÍ≥† Îπ®Î¶¨ Î®πÍ≥† ÏπòÏö∞ÏßÄ‚Ä¶", "Î∞∞Í≥†ÌîÑÍ∏¥ ÌïòÍ≤†Îã§", "Ïò§Ï£Ω Î∞∞Í≥†Ìå†ÏúºÎ©¥", "ÍπÄÎ∞• ÎßõÏûàÍ≤†Îã§", "ÎÇòÎèÑ Î≠ê Ï¢Ä Î®πÏùÑÍπå", "ÏÑúÎ°ú Ï°∞Í∏àÏî©Îßå Î∞∞Î†§ÌïòÎ©¥ Ï¢ãÏùÑÌÖêÎç∞", "Ï†Ä ÏÇ¨ÎûåÎèÑ ÎààÏπò Î≥¥Í≥† ÏûàÍ≤†ÏßÄ", "Ìïú ÏûÖ Îã¨ÎùºÍ≥† Ìï†Íπå", "Î¨¥Ïä® ÍπÄÎ∞•Ïù¥ÏßÄ", "Ï∞∏ÏπòÍπÄÎ∞•Ïù∏Í∞Ä", "ÌôòÍ∏∞ Ï¢Ä ÎêêÏúºÎ©¥" ],
  script9: [ "Îòê ÌÜµÌôîÌïòÎÑ§", "Ïû†ÍπêÏù¥ ÏïÑÎãàÎçòÎç∞", "Í∞ÅÎ≥ÑÌïú ÏÇ¨Ïù¥Ïù∏Í∞Ä?", "Îã§Îì§ ÌûòÎì†Îç∞ Ïôú Íµ≥Ïù¥ ÎßêÏùÑ Í∏∏Í≤å Ìï¥", "Î≠êÎùº Ìï¥Ïïº Ìï†ÏßÄ Î™®Î•¥Í≤†Îã§", "ÏïÑ Í≥µÎ∂ÄÌï¥ÏïºÌïòÎäîÎç∞‚Ä¶", "Î™á ÏãúÏóê Ïßë Í∞ÄÏïºÎêòÎ†§ÎÇò", "Ïö∞Î¶¨ Ï≥êÎã§Î≥¥ÎÑ§", "Ìú¥Í≤åÏã§ÏùÄ Ï¢Ä Í¥úÏ∞ÆÏßÄ ÏïäÎÇò?", "ÎÇ¥Í∞Ä ÎÑàÎ¨¥ ÏòàÎØºÌïúÍ∞Ä", "Ïù¥Ïñ¥Ìè∞ ÎÇÑÍπå", "Î¨¥Ïä® ÏñòÍ∏∞Î•º Ï†ÄÎ†áÍ≤å Ìï¥", "Î™©ÏÜåÎ¶¨Í∞Ä ÎÑàÎ¨¥ Ïª§", "ÎÇòÍ∞ÄÏÑú ÌÜµÌôîÌïòÎ©¥ ÏïàÎêòÎÇò", "Î¨¥Ïä® ÎÇ¥Ïö©Ïù∏ÏßÄ Îã§ Îì§Î¶¨ÎÑ§", "Ï†Ä ÏÇ¨ÎûåÏùÄ ÏïÑÎ¨¥Î†áÏßÄÎèÑ ÏïäÎÇò?", "Ïä¨Ïä¨ ÏßúÏ¶ùÎÇòÎÑ§", "Î¨¥Ïä® ÏûêÎûëÏùÑ Ï†ÄÎ†áÍ≤å Ïò§ÎûòÌïòÏßÄ", "ÎÇ¥ ÏñòÍ∏∞ ÌïòÎäîÍ±∞ ÏïÑÎãàÏïº?", "Í∏∞Î∂Ñ ÎÇòÎπ†" ],
  script10: [ "Í∑∏Í±¥ ÏûêÍ∏∞ ÎßàÏùå ÏïÑÎãåÍ∞Ä?", "ÏûêÏú†ÏßÄ Ïñ∏Ï†ú Í∞àÏßÄÎäî", "Í∑∏ÎÉ• ÏûêÎ¶¨Í∞Ä ÏóÜÏñ¥ÏÑú ÏßúÏ¶ù ÎÇú Í±∞ÏûñÏïÑ", "Î≠ê, Îã§Îì§ Í∑∏Îü∞ ÏÇ¨Îûå ÏûàÏßÄ Î≠ê", "Íµ≥Ïù¥ Ï†ÄÎ†áÍ≤å Ïã†Í≤Ω Ïì∏ ÏùºÏù∏Í∞Ä", "Îì£Îã§ Î≥¥Îãà Í¥úÌûà ÎÇ¥Í∞Ä Îã§ Î∂àÌé∏ÌïòÎÑ§", "Ïª§Ìîº Ìïú ÏûîÏúºÎ°ú ÏûêÎ¶¨ Ï∞®ÏßÄÌïòÎäî ÏÇ¨Îûå ÎßéÍ∏¥ ÌïòÏßÄ", "Ìïò, ÏöîÏ¶ò ÏßÑÏßú Îã§Îì§ ÏòàÎØºÌï¥Ï°åÎÑ§", "Í∑∏ÎûòÎèÑ Î∂ÄÎüΩÎã§Îãà, Í∑∏Í±¥ Îòê Î≠êÏïº", "Í∑∏Î†áÍ≤åÍπåÏßÄ Í∞êÏ†ï ÏÜåÎ™®Ìï¥Ïïº Îèº?", "Í∑∏ÎÉ• ÏûêÎ¶¨Í∞Ä ÏóÜÎã§Í≥† ÌïòÎ©¥ ÎêòÏßÄ", "Ï†ÄÎü∞ ÎªîÎªîÌï®Ïù¥ Î∂ÄÎüΩÍ∏¥ ÌïòÎã§", "ÎÇòÎèÑ Í∑∏ÎÉ• Îßê Î™ªÌï† ÎìØ", "ÏÇ¨Ïû•ÎãòÏùÄ Î¨¥Ïä® ÏÉùÍ∞ÅÏùºÍπå", "Ï†Ä ÏÇ¨ÎûåÏùÄ Î¨¥Ïä® Ïùº ÌïòÍ∏∏Îûò Ï†ÄÎ†áÍ≤å Ïó¥Ïã¨ÌûàÏßÄ?", "ÎÇòÎèÑ Ï†ÄÎ†áÍ≤å ÏßëÏ§ëÌï¥Î≥∏ Ï†ÅÏù¥ Ïñ∏Ï†úÎçîÎùº", "Í∑∏ÎÉ• Îã§Î•∏ Ïπ¥Ìéò Í∞àÍπå", "Îßê Í±∏Ïñ¥Î≥ºÍπå", "Î¨¥Ïä® Í≥µÎ∂ÄÌïòÏÑ∏Ïöî?" ]
};

const LINES = {
    s1: `‚ÄúÏöîÏ¶ò ÏòÅÌôî Î≠ê Î≥¥ÏÑ∏Ïöî? / Ï†ÄÎäî ÏöîÏ¶ò Î≠ò Î¥êÏïº Ìï†ÏßÄ Î™®Î•¥Í≤†Ïñ¥Ïöî. / ÎÑ∑ÌîåÎ¶≠Ïä§ ÏºúÎ©¥ Ï∂îÏ≤ú Î™©Î°ùÏù¥ ÎÅùÎèÑ ÏóÜÏûñÏïÑÏöî. / Í∑∏ÎÉ• ÏïÑÎ¨¥Í±∞ÎÇò ÎàåÎü¨Ïöî. / ÏÇ¨ÎûåÎì§Ïù¥ Ïû¨Î∞åÎã§Í≥† ÌïòÎäî Í±∞Ïöî. / Í∑ºÎç∞ Î≥¥Î©¥ Îã§ ÎπÑÏä∑Ìï¥Ïöî. / ÎàÑÍ∞Ä Ï£ΩÍ≥†, ÎàÑÍ∞Ä Î∞∞Ïã†ÌïòÍ≥†, ÏÇ¨ÎûëÌïòÍ≥†, Ïö∏Í≥†. / Í∑∏Îü∞ ÏñòÍ∏∞Ïöî. / Î≥¥Îã§ Î≥¥Î©¥ Ïñ¥Îäê ÏàúÍ∞Ñ Î®∏Î¶¨Í∞Ä Î©çÌï¥Ï†∏Ïöî. / Í∞êÏ†ïÏù¥ ÏóÜÏñ¥Ïöî. / ÏõÉÍ∏¥ Ïû•Î©¥Ïù∏Îç∞ÎèÑ ÏõÉÏùåÏù¥ Ïïà ÎÇòÏöî. / Í∑∏ÎûòÎèÑ Í∑∏ÎÉ• ÌãÄÏñ¥ÎÜîÏöî. / ÌôîÎ©¥Ïù¥ÎùºÎèÑ ÏºúÏ†∏ ÏûàÏúºÎ©¥ Îçú Ïô∏Î°úÏö∞ÎãàÍπåÏöî. / Ïñ¥Ï†úÎäî ÏÉàÎ≤Ω ÏÑ∏ ÏãúÍπåÏßÄ Î≥¥Îã§Í∞Ä Ïû†Îì§ÏóàÏñ¥Ïöî. / ÍøàÏóêÏÑúÎèÑ ÏûêÎßâÏù¥ ÌùòÎü¨Í∞ÄÎçîÎùºÍ≥†Ïöî. / Ïù¥ÏÉÅÌñàÏñ¥Ïöî. / ÏòÅÌôîÍ∞Ä ÎÅùÎÇ¨ÎäîÎç∞, ÏïÑÎ¨¥Í≤ÉÎèÑ ÎÇ®ÏßÄ ÏïäÏùÄ Í∏∞Î∂Ñ. / Í∞ÄÎÅî Í∑∏Îü∞ ÏÉùÍ∞Å Îì§Ïñ¥Ïöî. / ÏßÄÍ∏à ÎÇ¥Í∞Ä Î≥¥Îäî Í≤å ÏòÅÌôîÏù∏ÏßÄ, ÌòÑÏã§Ïù∏ÏßÄ. / Ïñ¥Ï∞®Ìîº Îëò Îã§ ÎÇ®Îäî Í±¥ ÏóÜÏûñÏïÑÏöî. / ‚Ä¶ÏïÑ, ÎÑàÎ¨¥ ÎßêÌñàÎÑ§Ïöî. / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s2: `‚ÄúÏù¥Í±∞Ïöî? / ÎÑ§, ÏóÑÎßàÍ∞Ä Îòê Î≥¥ÎÇ¥ÏÖ®Ïñ¥Ïöî. / ÏßÄÎÇúÎ≤à Í≤ÉÎèÑ ÏïÑÏßÅ Îã§ Î™ª Î®πÏóàÎäîÎç∞Ïöî. / ÎÉâÏû•Í≥† Îß® ÏïÑÎûò Ïπ∏Ïóê Í∑∏ÎåÄÎ°ú ÏûàÏñ¥Ïöî. / Ïù¥Ï†ú Ï¢Ä ÏãúÌÅºÌï¥Ï°åÏ£†. / Í∑ºÎç∞ Î≤ÑÎ¶¨Í∏∞ÎèÑ Ïï†Îß§ÌïòÏûñÏïÑÏöî. / Î≤ÑÎ¶¨Î©¥ Íº≠ ÏóÑÎßàÎ•º Î≤ÑÎ¶¨Îäî Í∏∞Î∂ÑÏù¥ Îì§Ïñ¥ÏÑúÏöî. / Î©∞Ïπ† Ï†ÑÏóê ‚ÄòÏù¥Ï†ú Î≥¥ÎÇ¥ÏßÄ ÎßàÏÑ∏Ïöî‚ÄôÎùºÍ≥† ÎßêÌñàÏñ¥Ïöî. / ÏßÑÏã¨Ïù¥ÏóàÎäîÎç∞, ÎÜçÎã¥Ï≤òÎüº ÎßêÌñàÏñ¥Ïöî. / Í∑∏Í≤å Îçú ÎØ∏ÏïàÌïòÎãàÍπåÏöî. / ÏóÑÎßàÎäî ‚ÄòÏù¥Î≤àÏù¥ ÎßàÏßÄÎßâÏù¥Ïïº‚Äô ÌïòÏãúÎçîÎãà Îòê Î≥¥ÎÇ¥ÏÖ®Ïñ¥Ïöî. / Î∞ïÏä§Ïóê Ï†ú Ïù¥Î¶ÑÏù¥ ÎòêÎ∞ïÎòêÎ∞ï Ïç® ÏûàÎçîÎùºÍ≥†Ïöî. / Í∑∏ Í∏ÄÏî® Î≥¥Î©¥ Ïù¥ÏÉÅÌïòÍ≤å ÏïÑÎ¨¥ ÎßêÎèÑ Î™ª ÌïòÍ≤†Ïñ¥Ïöî. / ÏÜîÏßÅÌûà ÏöîÏ¶òÏùÄ ÏÇ¨ Î®πÎäî ÍπÄÏπòÍ∞Ä Îçî ÎßõÏûàÏñ¥Ïöî. / Ìé∏ÌïòÍ≥† ÎÉÑÏÉàÎèÑ ÎçúÌïòÏûñÏïÑÏöî. / Í∑∏ÎûòÎèÑ ÏóÑÎßàÌïúÌÖåÎäî ‚ÄòÎßõÏûàÏñ¥Ïöî, Ïûò Î®πÍ≥† ÏûàÏñ¥Ïöî‚ÄôÎùºÍ≥† ÎßêÌï¥Ïöî. / Í∑∏Í≤å Í∑∏ÎÉ• ÏäµÍ¥ÄÏ≤òÎüº ÎèºÎ≤ÑÎ†∏Ïñ¥Ïöî. / Ïò§ÎäòÏùÄ ÏÉÅÏûêÎ•º Ïó¥ÏßÄÎèÑ ÏïäÏïòÏñ¥Ïöî. / ÌòÑÍ¥Ä ÏòÜÏóê Í∑∏ÎÉ• ÎíÄÏñ¥Ïöî. / ÎÉÑÏÉàÍ∞Ä Ïä¨Ïä¨ Ïò¨ÎùºÏò§ÎçîÎùºÍ≥†Ïöî. / Í∑∏ ÎÉÑÏÉàÍ∞Ä Ïã´ÏùÄÎç∞ Îòê ÏóÜÏúºÎ©¥ ÌóàÏ†ÑÌï¥Ïöî. / Ïù¥ÏÉÅÌïòÏ£†. / Î®πÏßÄÎèÑ Î™ªÌïòÍ≥† Î≤ÑÎ¶¨ÏßÄÎèÑ Î™ªÌïòÎ©¥ÏÑú Í≥ÑÏÜç Î∞õÏïÑÏöî. / Í∑∏Îü¨Î©¥ÏÑú Îòê Îã§ÏùåÏóî Ïïà Î∞õÍ≤†Îã§Í≥† Îã§ÏßêÌï¥Ïöî. / ‚Ä¶ÏïÑ, Ï†úÍ∞Ä ÎÑàÎ¨¥ Ïò§Îûò ÏñòÍ∏∞ÌñàÏ£†. / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s3: `‚ÄúÏôÄ. / Íµ≠Î∞• ÌïòÎÇò Î∞∞Îã¨ÎπÑÍ∞Ä 5Ï≤ú ÏõêÏù¥ÎûòÏöî. / ÏöîÏ¶ò ÏßÑÏßú Î∞∞Îã¨ÎπÑ Ïû•ÎÇú ÏïÑÎãàÏ£†. / Í∑∏ÎÉ• Ïò§ÌÜ†Î∞îÏù¥ Î™á Î∂Ñ Îã¨Î¶¨Î©¥ ÎêòÎäî Í±¥Îç∞. / ÏÜîÏßÅÌûà Î∞∞Îã¨ÏõêÎì§Ïù¥ Ï†úÏùº ÏâΩÍ≤å Îèà Î≤ÑÎäî Í≤É Í∞ôÏïÑÏöî. / Ïï± ÏºúÎ≥¥Î©¥ Ïó¨Îü¨ Í∞ú Ìïú Î≤àÏóê Ïû°Í≥† ÎèåÏûñÏïÑÏöî. / Í∑∏Îüº Ìïú ÏãúÍ∞ÑÏóê ÏñºÎßàÎÇò Î≤ÑÎäî Í±∞ÏòàÏöî? / Ï†ÄÎèÑ Í∞ÄÎÅî Í∑∏Îü∞ ÏÉùÍ∞ÅÌï¥Ïöî. / ‚ÄòÎÇ¥Í∞Ä Ïôú ÌöåÏÇ¨ Îã§ÎãàÏßÄ?‚Äô / ÏöîÏ¶òÏùÄ ÏïâÏïÑÏÑú Ï£ºÎ¨∏Îßå Ìï¥ÎèÑ ÎèàÏù¥ ÎÇòÍ∞ÄÎãàÍπå, / ÏùåÏãùÍ∞íÎ≥¥Îã§ Î∞∞Îã¨ÎπÑÍ∞Ä ÎπÑÏã∏Î©¥, ÎÇ¥Í∞Ä Ïùº ÌïòÎäî ÏÇ¨Îûå Îêú ÎäêÎÇåÏù¥ÏóêÏöî. / ÏòàÏ†ÑÏóê ÏùåÏãù Îä¶Í≤å ÏôÄÏÑú Î≥ÑÏ†ê Ìïú Í∞ú Ï§Ä Ï†Å ÏûàÏñ¥Ïöî. / Í∑∏Îû¨ÎçîÎãà Î∞∞Îã¨ÏõêÏù¥ Ï†ÑÌôîÌï¥ÏÑú Ï£ÑÏÜ°ÌïòÎã§Í≥† ÌïòÎçîÎùºÍ≥†Ïöî. / Ï∞∏ÎÇò Ïù∏ÏÇ¨ ÌïÑÏöîÏóÜÍ≥† Îπ®Î¶¨ Í∞ñÎã§Ï£ºÍ∏∞ÎÇò ÌïòÏßÄ. / Ïò§ÎäòÎèÑ Íµ≠Î∞•Ïù¥ ÏãùÏñ¥ÏÑú ÏôîÏñ¥Ïöî. / ÎöúÍªë Ïó¥ÏûêÎßàÏûê ÍπÄ ÌïòÎÇòÎèÑ ÏóÜÎçîÎùºÍ≥†Ïöî. / ÏÜçÏúºÎ°ú ‚ÄòÏù¥Í±∏Î°ú 5Ï≤ú Ïõê Î∞õÏïÑ?‚Äô Ïã∂ÏóàÏ£†. / Ï†ÄÍ∏∞Ïöî, Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s4: `‚ÄúÍ∑∏ ÎìúÎùºÎßà Î¥§Ïñ¥Ïöî? / Îã§Îì§ Î≥¥Í∏∏Îûò Ï†ÄÎèÑ Î¥§Ïñ¥Ïöî. / Í∑ºÎç∞ Ïù¥Ï†ú Ï¢Ä ÏßàÎ†§Ïöî. / Ï£ºÏù∏Í≥µÏù¥ Ï≤òÏùåÏóî Ï∞©ÌïòÎã§Í∞Ä Ï§ëÍ∞ÑÏóê Î≥µÏàòÌïòÍ≥†, ÎÇòÏ§ëÏóî Îã§Ïãú Ïö∏Ïñ¥Ïöî. / Îäò Í∑∏ÎûòÏöî. / Í∑∏ÎÉ• ÎªîÌïú Î†àÌååÌÜ†Î¶¨. / ÏπúÍµ¨Îì§Ïù¥ Îã§ Ïû¨Î∞åÎã§Í≥† ÌïòÎãàÍπå Ï†ÄÎèÑ ‚ÄòÏùë, Ïû¨Î∞åÎçîÎùº‚ÄôÎùºÍ≥† ÎßûÏû•Íµ¨Ï≥êÏöî. / Ïïà Í∑∏Îü¨Î©¥ Î∂ÑÏúÑÍ∏∞ Íπ®ÏûñÏïÑÏöî. / ÏÜîÏßÅÌûà ÏïÑÎ¨¥ ÎäêÎÇåÎèÑ ÏóÜÎäîÎç∞Ïöî. / ÏöîÏ¶òÏùÄ Í∑∏Îü∞ Í≤å ÎÑàÎ¨¥ ÎßéÏïÑÏöî. / ÏßÑÏã¨Ïù¥ ÏïÑÎãàÎùº ‚ÄòÍ∑∏Îü¥ÎìØÌïú Îßê‚ÄôÎ°ú Ï±ÑÏõåÏßÑ ÎåÄÌôîÎì§. / Îã§Îì§ Í∑∏Î†áÍ≤å ÏÇ¨ÎãàÍπå Ïù∏ÏÉùÏùÑ Í∑∏ÎåÄÎ°ú Î∞òÏòÅÌïúÍ±¥ÏßÄ.. / Ïû¨Î∞åÏûêÍ≥† Î≥¥Îäî ÎìúÎùºÎßàÏù∏Îç∞ ÌòÑÏã§ÏùÑ Í∑∏ÎåÄÎ°ú Ïû¨ÌòÑÌïòÎäîÍ≤å ÎßêÏù¥ ÎêòÎÇòÏöî. / Í∑∏Í≤å Î¨¥Ïä® Ï∞ΩÏûëÎ¨ºÏù¥Ïïº. / Í∑∏Îü¨ÏßÄ ÏïäÎÇòÏöî? / Ï†ÄÍ∏∞Ïöî. / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s5: `‚ÄúÏïÑÍπå Î≥¥ÏÖ®Ïñ¥Ïöî? / Í∑∏ ÏπúÍµ¨ ÏïÑÏù¥ Îç∞Î¶¨Í≥† ÏôîÎçò Í±∞. Ïï†Í∞Ä Í≥ÑÏÜç Îõ∞Ïñ¥Îã§ÎÖîÏûñÏïÑÏöî. / ÏÜåÎ¶¨ÎèÑ ÌÅ¨Í≥†. / ÏÜîÏßÅÌûà Ï¢Ä ÌîºÍ≥§ÌñàÏñ¥Ïöî. / Í∑∏ÎûòÏÑú ÏöîÏ¶òÏùÄ ÏòàÎØºÌïú ÏÇ¨Ïû•ÎãòÏù¥ Ïö¥ÏòÅÌïòÎäî Í≥≥Îßå Í∞ÄÏöî. / Í∑∏Îü∞Îç∞Í∞Ä Ïò§ÌûàÎ†§ Îçî Ï°∞Ïö©Ìï¥ÏÑúÏöî. / Í∑ºÎç∞ Í∑∏Îü∞ ÏñòÍ∏∞ÌïòÎ©¥ ÏÇ¨ÎûåÎì§Ïù¥ Î≠êÎùº ÌïòÏûñÏïÑÏöî. / ÎÇ®ÏÇ¨Ïä§ÎüΩÎåÄÎÇò. / ÏïÑÏù¥Î•º Ïã´Ïñ¥ÌïòÎäî Í≤å ÏïÑÎãàÎùº, Í∑∏ÎÉ• ÏãúÎÅÑÎü¨Ïö¥ Í≤å Ïã´ÏùÄ Í±¥Îç∞. / Í∑∏Í≤å Ïù¥ÏÉÅÌïú Í±¥Í∞ÄÏöî? / Ïñ¥Ï†ú ÏπúÍµ¨Í∞Ä Í∑∏Îü¨ÎçîÎùºÍ≥†Ïöî. / ‚ÄòÎÑàÎèÑ Ïï† ÎÇ≥ÏúºÎ©¥ Îã¨ÎùºÏßà Í±∞Ïïº.‚Äô / Í∑∏ ÎßêÏù¥ Ïù¥ÏÉÅÌïòÍ≤å ÏÑ¨Ï∞üÌñàÏñ¥Ïöî. / Î∞îÎÄåÎäî Í≤å ÎãπÏó∞Ìïú ÏùºÏ≤òÎüº ÎßêÌïòÎãàÍπåÏöî. / ‚Ä¶ Ï†ÄÍ∏∞Ïöî, Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s6: `‚ÄúÏó¨Í∏∞Ïöî? / ÎÑ§, ÏûÑÏÇ∞Î∂ÄÏÑù ÎßûÏïÑÏöî. / Í∑ºÎç∞ ÏßÄÍ∏à ÏïÑÎ¨¥ÎèÑ ÏóÜÏûñÏïÑÏöî. / Ïò§Îäò ÌïòÎ£®Ï¢ÖÏùº ÏÑú ÏûàÏóàÎçîÎãà. / Î∞úÏù¥ ÎÑàÎ¨¥ ÏïÑÌååÏÑúÏöî. / ÌóàÎ¶¨ÎèÑ Ï¢Ä Ïë§ÏãúÍ≥†. / Í∑ºÎç∞ ÏïâÍ≥† ÎÇòÎãàÍπå Í¥úÌûà ÎààÏπòÍ∞Ä Î≥¥Ïù¥ÎÑ§Ïöî. / ÎàÑÍ∞Ä Ï≥êÎã§Î≥¥Îäî Í≤ÉÎèÑ ÏïÑÎãåÎç∞, ÎßàÏπò Î≠ê ÏûòÎ™ªÌïú Í≤É Í∞ôÏïÑÏöî. / Î∞∞Î†§ÎùºÎäî Í≤å Ï∞∏ Ïñ¥Î†µÏ£†. / ÎÇ¥Í∞Ä Í∞ÄÏßÑ Ïó¨Ïú†ÏóêÏÑú Ï°∞Í∏à ÎçúÏñ¥Ï£ºÎäîÍ±¥Îç∞ Í∑ºÎç∞ ÏßÄÍ∏àÏùÄ ÎÇòÌïúÌÖå Ïó¨Ïú†Í∞Ä ÏóÜÍ±∞Îì†Ïöî. / ÏÇ¨ÎûåÏù¥ ÌîºÍ≥§Ìï† Îïê ÎßàÏùåÏùò ÏûêÎ¶¨ÎèÑ ÎπÑÏ¢ÅÏïÑÏßÄÎäî Í≤É Í∞ôÏïÑÏöî. / ÎàÑÍ∞Ä Ïò§Î©¥ ÏùºÏñ¥ÎÇ† Í±∞ÏòàÏöî. / Í∑ºÎç∞ Ïù¥ÏÉÅÌïòÍ≤å Í∑∏Îü∞ ÎßàÏùåÏù¥ Îì§Î©¥ Îçî Ïò§Îûò ÏïâÍ≥† Ïã∂Ïñ¥Ï†∏.. / ‚Ä¶ÏïÑ, Ï†Ä ÎïåÎ¨∏Ïóê Î∂àÌé∏ÌïòÏÖ®ÎÇòÏöî? / ÏñºÍµ¥Ïù¥ Ï¢Ä Íµ≥ÏúºÏÖ®ÎÑ§Ïöî. / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s7: `‚ÄúÎ∞õÏßÄ ÎßàÏÑ∏Ïöî. / Ïì∞Î†àÍ∏∞Ïù∏Îç∞ Ï†ÄÎäî Í∑∏ÎÉ• Î∞îÎ°ú Î≤ÑÎ†∏Ïñ¥Ïöî. / Í∏∏ ÎßâÍ≥† Í≥ÑÏÜç Îì§Ïù¥Î∞ÄÍ∏∏ÎûòÏöî. / ÏÇ¨Ïã§ Ï≤òÏùåÏóî Í∑∏ÎÉ• Î∞õÏúºÎ†§Îã§, ÎÑàÎ¨¥ ÎÅàÏßàÍ∏∞Í≤å Ïò§ÎãàÍπå ÏßúÏ¶ùÏù¥ ÎÇòÎçîÎùºÍ≥†Ïöî. / Î∞õÏûêÎßàÏûê Ï∞¢ÏóàÏñ¥Ïöî. / Î≥¥Îäî ÏïûÏóêÏÑúÏöî. / Í∑∏ ÏÇ¨ÎûåÏù¥ ÏïÑÎ¨¥ ÎßêÎèÑ Ïïà ÌïòÎçîÎùºÍ≥†Ïöî. / Í∑∏Í≤å Îçî Í∏∞Î∂ÑÏù¥ Ïù¥ÏÉÅÌñàÏñ¥Ïöî. / Ï°∞Í∏à ÎØ∏ÏïàÌñàÎäîÎç∞, ÏÜîÏßÅÌûà ÌõÑÎ†®ÌñàÏñ¥Ïöî. / Ï∞¢Í∏¥ Ï¢ÖÏù¥ Ï°∞Í∞ÅÏù¥ Î∞îÎã•Ïóê Î∂ôÏñ¥ ÏûàÎäîÍ≤å ÎßàÏùåÏóê Í±∏Î¶¨Í∏¥ ÌñàÎäîÎç∞, / ÎàÑÍ∞Ä ÏπòÏö∞Í≤†Ï£†. / Í∑∏Îü∞ ÏÉùÍ∞Å ÌïòÎ©¥ÏÑú Í∑∏ÎÉ• ÏßÄÎÇòÍ∞îÏñ¥Ïöî. / ‚Ä¶Ï†úÍ∞Ä ÎÑàÎ¨¥ ÏÜîÏßÅÌñàÎÇòÏöî. / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s8: `‚ÄúÎÉÑÏÉàÎÇòÏöî? / ÏïÑ, Ï£ÑÏÜ°Ìï¥Ïöî. / ÍπÄÎ∞•Ïù¥ÏóêÏöî. / Ïó¥Ï∞®ÏóêÏÑú Î®πÏúºÎ©¥ Ïïà ÎêúÎã§Îäî Í∑úÏπôÏùÄ ÏóÜÏûñÏïÑÏöî. / Î∞∞Í∞Ä ÎÑàÎ¨¥ Í≥†Ìå†Ïñ¥Ïöî. / ÏïÑÏπ®ÎèÑ Î™ª Î®πÍ≥† ÎÇòÏôÄÏÑúÏöî. / ÏûëÍ≤å Î≤†Ïñ¥ Î®πÏúºÎ†§Í≥† ÌñàÎäîÎç∞, ÎÉÑÏÉàÍ∞Ä ÌçºÏ°åÎÇò Î¥êÏöî. / ÏòÜÏûêÎ¶¨ Î∂ÑÏù¥ Í≥†Í∞úÎ•º ÎèåÎ¶¨ÏãúÎçîÎùºÍ≥†Ïöî. / Í∑∏ ÏàúÍ∞Ñ ÏñºÍµ¥Ïù¥ Ìôï Ïó¥Ïù¥ Ïò¨ÎùºÏôîÏñ¥Ïöî. / ÏïÑÎ¨¥ ÎßêÎèÑ Ïïà ÌñàÎäîÎç∞ ÌòºÎÇú Í∏∞Î∂ÑÏù¥ÎûÑÍπå. / ÏÇ¨ÎûåÎì§Ïù¥ Ï°∞Ïö©ÌïúÎç∞ ÎÇòÎßå Î≠îÍ∞Ä Ìï¥Î≤ÑÎ¶∞ ÎäêÎÇå ÏûàÏûñÏïÑÏöî. / Í¥úÌûà Îçî ÌÅ¨Í≤å ÏÇºÌÇ§Í≤å ÎêòÍ≥†. / ÎÉÑÏÉàÎäî Í∏àÎ∞© ÏÇ¨ÎùºÏßà Í±∞ÏòàÏöî. / ÌïòÎÇò ÎìúÏã§ÎûòÏöî? / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s9: `‚ÄúÏïÑ, Ï†úÍ∞Ä Ï¢Ä ÏãúÎÅÑÎü¨Ïõ†Ï£†? / Ìú¥Í≤åÏã§Ïù¥Îùº Í¥úÏ∞ÆÏùÑ Ï§Ñ ÏïåÏïòÏñ¥Ïöî. / Ïû†Íπê ÌÜµÌôîÌñàÍ±∞Îì†Ïöî. / ÏπúÍµ¨ÌïúÌÖå Î≥Ñ ÏñòÍ∏∞ÎèÑ Ïïà ÌñàÏñ¥Ïöî. / Í∑∏ÎÉ• Ïò§ÎûúÎßåÏóê Ïó∞ÎùΩÌï¥ÏÑú Î®πÍ≥† ÏÇ¨Îäî ÏñòÍ∏∞ Ïû†Íπê ÌñàÏñ¥Ïöî.. / Í∑ºÎç∞ ÏïûÏóê ÏûàÎçò Î∂ÑÏù¥ Í≥ÑÏÜç Ï≥êÎã§Î≥¥ÎçîÎùºÍ≥†Ïöî. / Í∑∏ ÏãúÏÑ†Ïù¥ Ï¢Ä Í∏∞ÏñµÏóê Ïò§Îûò ÎÇ®ÎÑ§Ïöî. / ÎÇ¥Í∞Ä Í∑∏Î†áÍ≤å ÏûòÎ™ªÌñàÎÇò Ïã∂ÏóàÏñ¥Ïöî. / ÏöîÏ¶òÏùÄ Îßê ÌïúÎßàÎîî ÌïòÎäî Í≤ÉÎèÑ ÎààÏπò Î¥êÏïº ÌïòÏûñÏïÑÏöî. / Îã§Îì§ Ï°∞Ïö©Ìïú Í±∏ Ï¢ãÏïÑÌïòÎäîÎç∞, ÎÑàÎ¨¥ Ï°∞Ïö©ÌïòÎ©¥ Îòê ÎãµÎãµÌïòÏûñÏïÑÏöî. / Í∑∏ÎÉ• Ïû†Íπê ÏÜåÎ¶¨ ÎÇ¥Í≥† Ïã∂ÏóàÎäîÎç∞ Í∑∏Í≤å Ïù¥Î†áÍ≤åÍπåÏßÄ Ïã†Í≤Ω Ïì∞Ïù¥Îäî ÏùºÏùº Ï§Ñ Î™∞ÎûêÎÑ§Ïöî. / Ïù¥ÏÉÅÌïòÏ£†. / ÏïÑÎ¨¥ ÎßêÎèÑ Ïïà ÌïòÎäî Í≤å Ï†úÏùº ÏïàÏ†ÑÌïú ÏÑ∏ÏÉÅ Í∞ôÏïÑÏöî. / ‚Ä¶ÏïÑ, Ï†úÍ∞Ä Îòê Í∏∏Í≤å ÎßêÌñàÎÑ§Ïöî. / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`,
    s10:`‚ÄúÏ†ÄÍ∏∞ Ï†Ä ÏÇ¨Îûå Î≥¥Ïù¥ÏÑ∏Ïöî? / ÎÖ∏Ìä∏Î∂Å Ìé¥ÎÜìÏùÄ ÏÇ¨Îûå. / Ïª§ÌîºÎäî ÌïúÏ∞∏ Ï†ÑÏóê Îã§ ÎìúÏã† Í±∞ Í∞ôÏùÄÎç∞ ÏïÑÏßÅÎèÑ ÏûêÎ¶¨Ïóê ÏûàÎÑ§Ïöî. / Îã§Î•∏ ÏÇ¨ÎûåÎì§ ÏÑú ÏûàÎäî Í±∞ Î≥¥Ïù¥Î©¥ Ï¢Ä ÎπÑÏºúÏ£ºÏãúÏßÄ.. / Ï≤òÏùåÏóî Ï¢Ä ÏßúÏ¶ùÎÇ¨Ïñ¥Ïöî. / Í∑ºÎç∞ Í≥ÑÏÜç Î≥¥ÎãàÍπå Î∂ÄÎüΩÎçîÎùºÍ≥†Ïöî. / Ï†ÄÎ†áÍ≤å ÏïÑÎ¨¥Î†áÏßÄ ÏïäÍ≤å ÏûêÍ∏∞ ÏùºÎßå ÌïòÎäî Í±∞Ïöî. / Ï†ÄÎäî Í∑∏Î†áÍ≤å Î™ª ÌïòÍ±∞Îì†Ïöî. / Í∑∏ ÏÇ¨Îûå ÌÉÄÏù¥Ìïë ÏÜåÎ¶¨Í∞Ä Í≥ÑÏÜç Îì§Î¶¨ÎçîÎùºÍ≥†Ïöî. / Í∑∏ Î¶¨Îì¨Ïù¥ Î∂àÏæåÌïú ÏÜåÏùåÏúºÎ°ú ÎäêÍª¥ÏßÄÎçîÎùºÍ≥† ÎÇòÏ§ëÏóêÎäî. / Ï†ÄÍ∏∞Ïöî / Í¥úÏ∞ÆÏúºÏÑ∏Ïöî?‚Äù`
};
const DUR = { 
    s1: [ 1800, 2500, 3100, 1500, 2200, 1900, 3500, 1000, 3000, 1500, 2700, 1900, 3400, 3300, 2700, 1300, 3500, 2000, 2900, 2500, 1900, 1400 ],
    s2: [ 700, 2100, 2600, 2900, 1500, 2100, 3000, 3100, 2400, 1800, 4200, 3300, 3600, 3200, 2200, 3800, 2600, 2600, 1900, 2400, 3400, 1000, 3900, 3400, 3000, 1800 ],
    s3: [ 400, 3000, 2500, 2700, 3600, 3200, 2700, 2500, 2100, 3300, 4200, 3700, 3600, 3200, 2700, 3000, 2800, 2300 ],
    s4: [ 1500, 2000, 1700, 5100, 1000, 2100, 4600, 2200, 2500, 2400, 3700, 4000, 4600, 2200, 1400, 700, 1500 ],
    s5: [ 1500, 3500, 1100, 2000, 4000, 2500, 3100, 1400, 4000, 1800, 2100, 3000, 2700, 3200, 2100 ],
    s6: [ 800, 1900, 2100, 2300, 1800, 1600, 3300, 4100, 2200, 5600, 4400, 2300, 4800, 2800, 2500, 1800 ],
    s7: [ 1100, 2900, 2300, 5200, 1800, 1300, 2700, 2400, 2800, 4800, 1400, 2900, 2400, 1600 ],
    s8: [ 1000, 1200, 1200, 3400, 1800, 2200, 3700, 2900, 3100, 3200, 4200, 2500, 2400, 1500, 1500 ],
    s9: [ 2000, 2700, 1800, 2400, 4900, 3500, 3000, 2600, 3800, 4700, 5600, 1000, 4600, 2700, 1700 ],
    s10:[ 2100, 1600, 4700, 3800, 2000, 2600, 3400, 2100, 3200, 4700, 800, 1500 ]
};
const AUDIO_KEY = {
  'script/script1.mp3': 's1', 'script/script2.mp3': 's2', 'script/script3.mp3': 's3',
  'script/script4.mp3': 's4', 'script/script5.mp3': 's5', 'script/script6.mp3': 's6',
  'script/script7.mp3': 's7', 'script/script8.mp3': 's8', 'script/script9.mp3': 's9',
  'script/script10.mp3': 's10'
};
const audioCache = new Map();
const lineCache  = new Map();

let gutLoop = false;
let allowRecognition = true;
let hasSeenDismissal = false;
let lastChangeTime = Date.now();
let timeoutChecker;
let currentScriptId = null;
let currentDialogueAudio = null;
let playbackInterval = null;
let gutAudioInstance = null;
const toLines = s => s.split('/').map(x=>x.trim()).filter(Boolean);

// --- 3) ÌïµÏã¨ Í∏∞Îä• ---
function preloadFartSounds() {
  fartSoundFiles.forEach(path => {
    const audio = new Audio(path);
    audio.load();
    fartAudioObjects.push(audio);
  });
  console.log(`üîä ${fartAudioObjects.length}Í∞úÏùò Ìö®Í≥ºÏùå ÏÇ¨Ï†Ñ Î°úÎî© ÏôÑÎ£å.`);
}
function playGutLoop(index = 0) {
  const gutAudio = new Audio(gutSounds[index]);
  gutAudio.loop = true;
  gutAudio.play();
  return gutAudio;
}

// ‚ñº‚ñº‚ñº [ÏàòÏ†ï] 3Î∂Ñ ÌÉÄÏûÑÏïÑÏõÉ Î°úÏßÅ Î≥µÏõê ‚ñº‚ñº‚ñº
function startTimeoutChecker() {
  lastChangeTime = Date.now();
  if (timeoutChecker) clearInterval(timeoutChecker);
  
  timeoutChecker = setInterval(() => {
    const elapsedTime = Date.now() - lastChangeTime;
    
    // 3Î∂Ñ ÎèôÏïà lastChangeTimeÏù¥ Í∞±Ïã†ÎêòÏßÄ ÏïäÏúºÎ©¥ (Ï¶â, onresultÍ∞Ä Ìïú Î≤àÎèÑ Ìò∏Ï∂úÎêòÏßÄ ÏïäÏúºÎ©¥)
    if (allowRecognition && elapsedTime >= 3*60*1000) {
      console.log("‚è∞ 3Î∂Ñ ÎπÑÌôúÏÑ± ÌÉÄÏûÑÏïÑÏõÉ. Ïû¨ÏãúÎèÑ ÌôîÎ©¥ ÌëúÏãú.");
      allowRecognition = false;
      if (recognition) recognition.stop();
      
      // 'Îã§Ïãú ÌïòÍ∏∞' Î≤ÑÌäº Î∞è Ïò§Î≤ÑÎ†àÏù¥ ÌëúÏãú
      listeningUI.classList.add('hidden');
      blurOverlay.classList.remove('hidden');
      retryBtn.classList.remove('hidden');
      
      clearInterval(timeoutChecker); // ÌÉÄÏûÑÏïÑÏõÉ Ï§ëÏßÄ
    }
  }, 1000);
}
// ‚ñ≤‚ñ≤‚ñ≤ ÏàòÏ†ï ÏôÑÎ£å ‚ñ≤‚ñ≤‚ñ≤

function preloadDialogueAssets() {
  dialogueScripts.forEach(ds => {
    const key = AUDIO_KEY[ds.audio];
    if (key && !lineCache.has(ds.id)) {
      lineCache.set(ds.id, toLines(LINES[key]));
    }
  });

  dialogueScripts.forEach(ds => {
    if (!audioCache.has(ds.id)) {
      const a = new Audio(ds.audio);
      a.preload = 'auto';
      a.loop = false;
      const onErr = () => {};
      a.addEventListener('error', onErr, { once: true });
      try { a.load(); } catch (_) {}
      audioCache.set(ds.id, a);
    }
  });

  console.log('‚ö° ÏóêÌîºÏÜåÎìú Ïò§ÎîîÏò§/ÎùºÏù∏ ÏÇ¨Ï†Ñ Î°úÎî© ÏôÑÎ£å(Í∞ÄÎä•Ìïú Î≤îÏúÑ ÎÇ¥).');
}

function playScriptKaraoke() {
  const audio = currentDialogueAudio;
  const lines = Array.from(document.querySelectorAll('#script-body .line'));
  const GAP = 0.1;
  const EPS = 1e-4;

  if (typeof playbackInterval !== 'undefined' && playbackInterval) {
    clearTimeout(playbackInterval);
    playbackInterval = null;
  }
  if (playScriptKaraoke._unbind) {
    try { playScriptKaraoke._unbind(); } catch (_) {}
    playScriptKaraoke._unbind = null;
  }

  scriptBody.classList.add('playing');
  lines.forEach(el => el.classList.remove('active'));

  let cues = [];
  let activeIndex = -1;

  function effectiveLen(s) {
    if (!s) return 1;
    try {
      const onlyWord = s.replace(/[^\p{L}\p{N}]+/gu, '');
      return Math.max(1, onlyWord.length);
    } catch {
      const onlyWord = s.replace(/[\s.,!?;:'"‚Äú‚Äù‚Äò‚Äô‚Ä¶¬∑\-‚Äì‚Äî()[\]{}<>/\\]+/g, '');
      return Math.max(1, onlyWord.length);
    }
  }

  function buildCues(totalDurationSec) {
    cues = [];
    const n = lines.length;
    if (!n || !isFinite(totalDurationSec) || totalDurationSec <= 0) return;

    const totalGap = GAP * Math.max(0, n - 1);
    const speechBudget = Math.max(0, totalDurationSec - totalGap);

    if (speechBudget <= 0) {
      const per = totalDurationSec / n;
      let t = 0;
      for (let i = 0; i < n; i++) {
        const start = t;
        const end = start + per;
        cues.push({ start, end });
        t = end;
      }
      return;
    }

    const weights = lines.map(el => effectiveLen(el.textContent || el.innerText || ''));
    const wsum = weights.reduce((a,b)=>a+b,0) || n;
    let durations = weights.map(w => (speechBudget * w / wsum));

    const diff = speechBudget - durations.reduce((a,b)=>a+b,0);
    if (Math.abs(diff) > EPS) {
      const maxIdx = durations.indexOf(Math.max(...durations));
      durations[maxIdx] += diff;
      if (durations[maxIdx] < 0.05) durations[maxIdx] = 0.05;
    }

    let t = 0;
    for (let i = 0; i < n; i++) {
      const start = t;
      const end = start + Math.max(0.05, durations[i]);
      cues.push({ start, end });
      t = end;
      if (i < n - 1) t += GAP;
    }

    const over = (t - GAP) - totalDurationSec;
    if (over > EPS) {
      const last = cues[cues.length - 1];
      last.end = Math.max(last.start + 0.05, last.end - over);
    }
  }

  function setActive(idx) {
    if (idx === activeIndex) return;
    if (lines[activeIndex]) lines[activeIndex].classList.remove('active');
    if (idx >= 0 && lines[idx]) {
      lines[idx].classList.add('active');
      try {
        lines[idx].scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });
      } catch (_) {}
    }
    activeIndex = idx;
  }

  function updateByTime() {
    if (!cues.length) return;
    const t = audio.currentTime || 0;
    let idx = -1;
    for (let i = 0; i < cues.length; i++) {
      const c = cues[i];
      if (t + EPS >= c.start && t < c.end - EPS) { idx = i; break; }
    }
    setActive(idx);
  }

  function onLoadedMeta() {
    buildCues(audio.duration);
    updateByTime();
  }

  if (isFinite(audio.duration) && audio.duration > 0) {
    onLoadedMeta();
  } else {
    audio.addEventListener('loadedmetadata', onLoadedMeta, { once: true });
  }

  const onTime    = () => updateByTime();
  const onSeeked  = () => updateByTime();
  const onPlaying = () => updateByTime();
  const onRate    = () => updateByTime();
  const onEnded   = () => setActive(-1);

  audio.addEventListener('timeupdate', onTime);
  audio.addEventListener('seeked', onSeeked);
  audio.addEventListener('playing', onPlaying);
  audio.addEventListener('ratechange', onRate);
  audio.addEventListener('ended', onEnded);

  playScriptKaraoke._unbind = () => {
    audio.removeEventListener('timeupdate', onTime);
    audio.removeEventListener('seeked', onSeeked);
    audio.removeEventListener('playing', onPlaying);
    audio.removeEventListener('ratechange', onRate);
    audio.removeEventListener('ended', onEnded);
  };
}

// --- 5) ÏÉÅÌò∏ÏûëÏö© UI ---
function triggerDismissalResponse() {
  const dismissalPhrases = ["Îã§Îì§ Í∑∏Îûò.", "ÏõêÎûò Í∑∏Îü∞ Í±∞Ïïº.", "Ïú†ÎÇúÏä§ÎüΩÍ≤å Íµ¥ÏßÄ Îßà."];
  const phrase = dismissalPhrases[Math.floor(Math.random() * dismissalPhrases.length)];
  const sentenceParts = [{ text: phrase, type: 'effect' }];
  createSentence(sentenceParts);
  hasSeenDismissal = true;
  setTimeout(() => {
    if (allowRecognition) {
      setListeningUI();
      lastChangeTime = Date.now();
    }
  }, 2000);
}
function showTranscript(text) {
  const container = document.getElementById('sentence-container');
  container.innerHTML = '';
  const row = document.createElement('div');
  row.classList.add('container');
  const span = document.createElement('span');
  span.textContent = `"${text}"`;
  span.style.fontWeight = '400';
  span.style.filter = 'none';
  row.appendChild(span);
  container.appendChild(row);
}
function triggerResolutionEnding() {
  allowRecognition = false;
  if (recognition) recognition.stop();
  listeningUI.classList.add('hidden');
  sentenceContainer.innerHTML = '';
  const sound = fartAudioObjects[Math.floor(Math.random() * fartAudioObjects.length)];
  sound.currentTime = 0;
  sound.play();
  sound.onended = () => {
    const resolutionStatements = [ "ÏãúÏõêÌïòÎÑ§Ïöî! Í∞êÏ†ïÎèÑ Î∞©Í∑ÄÏ≤òÎüº, Ï∞∏ÏßÄ ÎßêÍ≥† ÏÜîÏßÅÌïòÍ≤å ÌÑ∞Îú®Î†§Î≥¥ÏÑ∏Ïöî.",
    "ÏûòÌñàÏñ¥Ïöî! Î∞©Í∑ÄÎ•º ÎÄåÎìØ Í∞êÏ†ïÎèÑ ÏÜîÏßÅÌïòÍ≤å ÌëúÌòÑÌïòÎäî Ïö©Í∏∞Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.",
    "Î∞©Í∑ÄÎäî Ï∞∏Îäî Í≤å ÏïÑÎãàÏ£†. Í∞êÏ†ïÎèÑ ÎßàÏ∞¨Í∞ÄÏßÄÏòàÏöî. ÏßÄÍ∏àÏ≤òÎüº ÏÜîÏßÅÌïòÍ≤å ÎßêÌï¥Î≥¥ÏÑ∏Ïöî!",
    "ÏÜç ÏãúÏõêÌïòÎÑ§Ïöî! Îã§ÏùåÏóêÎèÑ Î∞©Í∑ÄÏ≤òÎüº, ÌïòÍ≥† Ïã∂ÏùÄ ÎßêÏùÑ Í∑∏ÎÉ• ÌïòÏÑ∏Ïöî.",
    "ÏãúÏõêÌïúÍ∞ÄÏöî? Î∞©Í∑ÄÎèÑ Í∞êÏ†ïÎèÑ, Ï∞∏ÏúºÎ©¥ ÎãµÎãµÌï¥Ïöî. Ïù¥Ï†† Ï∞∏ÏßÄ ÎßêÍ≥† ÌëúÌòÑÌïòÏÑ∏Ïöî.",
    "Í∞êÏ†ïÏùÑ ÌëúÌòÑÌïòÎäî Í±¥ Ï∞∏ÏïòÎçò Î∞©Í∑ÄÎ•º ÎÄåÎäî Í≤ÉÏ≤òÎüº ÏãúÏõêÌïú ÏùºÏù¥ÏóêÏöî. ÎßùÏÑ§Ïù¥ÏßÄ ÎßàÏÑ∏Ïöî.",
    "Î∞©Í∑ÄÏ≤òÎüº ÏÜîÏßÅÌïòÍ≤å ÎßàÏùåÏÜçÏóê ÏûàÎäî ÎßêÏùÑ Í∫ºÎÇ¥Î≥¥ÏÑ∏Ïöî!",
    "ÏûòÌñàÏñ¥Ïöî! Î∞©Í∑ÄÎèÑ Í∞êÏ†ïÎèÑ, Ï∞∏ÏßÄ ÎßêÍ≥† ÏãúÏõêÌïòÍ≤å ÌÑ∞Îú®Î†§Î≥¥ÏÑ∏Ïöî." ];
    const statement = resolutionStatements[Math.floor(Math.random() * resolutionStatements.length)];
    const sentenceParts = [{ text: statement, type: 'effect' }];
    createSentence(sentenceParts);
    setTimeout(() => {
      retryBtn.classList.remove('hidden');
      blurOverlay.classList.remove('hidden');
    }, 5000);
    sound.onended = null;
  };
}


// --- 6) Í≤ΩÌóò ÏãúÏûë ---
async function startExperience(selectedScript) {
  episodeSelectionContainer.classList.add('hidden');

  scriptBody.innerHTML = '';
  scriptView.classList.remove('hidden');
  scriptView.style.opacity = 1;

  const cacheLines = lineCache.get(selectedScript.id);
  const linesArr = cacheLines || toLines(LINES[AUDIO_KEY[selectedScript.audio]]);

  await new Promise(requestAnimationFrame);
  const frag = document.createDocumentFragment();
  for (let i = 0; i < linesArr.length; i++) {
    const lineDiv = document.createElement('div');
    lineDiv.classList.add('line');
    const text = linesArr[i] || ' ';
    lineDiv.textContent = text;
    lineDiv.setAttribute('aria-label', text);
    frag.appendChild(lineDiv);
  }
  scriptBody.appendChild(frag);

  if (!gutAudioInstance) gutAudioInstance = playGutLoop();
  gutAudioInstance.pause();

  currentScriptId = selectedScript.id;
  const cachedAudio = audioCache.get(selectedScript.id);
  currentDialogueAudio = cachedAudio ? cachedAudio : new Audio(selectedScript.audio);

  currentDialogueAudio.loop = false;
  try { currentDialogueAudio.currentTime = 0; } catch (_) {}

  currentDialogueAudio.addEventListener('play',  () => gutAudioInstance.play());
  currentDialogueAudio.addEventListener('pause', () => gutAudioInstance.pause());
  currentDialogueAudio.addEventListener('ended', () => gutAudioInstance.pause(), { once: true });

  playScriptKaraoke();

  currentDialogueAudio.play().catch(()=>{});
  
  startChaosAnimation(particleFragments[selectedScript.id]); 
  
  currentDialogueAudio.onended = async () => {
    if (playbackInterval) clearTimeout(playbackInterval);
    await startGatheringAnimation();
    if (allowRecognition) {
      scriptView.classList.add('hidden');
      loadCSVAndStartRecognition(selectedScript.themeDataUrl);
      
      setTimeout(() => {
        responseGuides.classList.remove('hidden');
        // ‚ñº‚ñº‚ñº ÏàòÏ†ïÎêú Î∂ÄÎ∂Ñ ‚ñº‚ñº‚ñº
        // 1Ï¥à Îí§Ïóê ÏïàÎÇ¥ Î¨∏Íµ¨Í∞Ä ÎÇòÌÉÄÎÇòÎèÑÎ°ù Ï∂îÍ∞Ä ÏßÄÏó∞ ÏÑ§Ï†ï
        setTimeout(() => {
          document.getElementById('initial-voice-prompt')?.classList.add('visible');
        }, 1000);
        // ‚ñ≤‚ñ≤‚ñ≤ ÏàòÏ†ï ÏôÑÎ£å ‚ñ≤‚ñ≤‚ñ≤
      }, 500);
    }
  };
}


// --- 7) Ïù¥Î≤§Ìä∏ Î∞è Ï¥àÍ∏∞Ìôî ---
document.addEventListener('DOMContentLoaded', () => {
  preloadFartSounds();
  preloadDialogueAssets();
  console.log('üéâ Î™®Îì† Î¶¨ÏÜåÏä§ Ï§ÄÎπÑ ÏôÑÎ£å.');
  
  const introContainer = document.getElementById('intro-container');
  const logoTextElement = document.querySelector('.logo-text');
  
  const fx = new TextScramble(logoTextElement);
  
  const runAnimation = async () => {
    await fx.setText('Bub');
    await new Promise(resolve => setTimeout(resolve, 200));
    await fx.setText('Bubbli');
    await new Promise(resolve => setTimeout(resolve, 200));
    await fx.setText('Bubbling');
  };
  
  const loopAnimation = async () => {
    while (true) {
      await runAnimation();
      await new Promise(resolve => setTimeout(resolve, 2000));
      await fx.setText('');
      await new Promise(resolve => setTimeout(resolve, 500));
    }
  };
  
  loopAnimation();

  startBtn.addEventListener('click', () => {
    introContainer.classList.add('hidden'); 
    episodeSelectionContainer.classList.remove('hidden');
    initializeEpisodeSelector();
  }, { once: true });
  
  retryBtn.addEventListener('click', () => { location.reload(); });
});


function initializeEpisodeSelector() {
    let scale = 0.5;
    let translateX = (viewport.clientWidth - stage.clientWidth * scale) / 2;
    let translateY = (viewport.clientHeight - stage.clientHeight * scale) / 2;
    let isDragging = false;
    let startX, startY, dragStartX, dragStartY;

    // ‚ñº‚ñº‚ñº [Ï∂îÍ∞Ä] ÏóêÌîºÏÜåÎìú ÎûúÎç§ Î∞∞Ïπò Î°úÏßÅ ‚ñº‚ñº‚ñº
    // 1. Í∏∞Ï°¥Ïùò ÌïòÎìúÏΩîÎî©Îêú ÏúÑÏπò 10Í∞úÎ•º Î∞∞Ïó¥Î°ú Ï†ïÏùò
    const positions = [
        { top: '20%', left: '15%' }, { top: '55%', left: '10%' },
        { top: '10%', left: '40%' }, { top: '70%', left: '35%' },
        { top: '25%', left: '65%' }, { top: '65%', left: '68%' },
        { top: '15%', left: '85%' }, { top: '80%', left: '88%' },
        { top: '45%', left: '80%' }, { top: '45%', left: '50%' }
    ];

    // 2. Fisher-Yates ÏÖîÌîå ÏïåÍ≥†Î¶¨Ï¶ò
    function shuffle(array) {
        let currentIndex = array.length, randomIndex;
        // Î∞∞Ïó¥Ïù¥ Îπå ÎïåÍπåÏßÄ ÏöîÏÜåÎ•º ÏÑûÏäµÎãàÎã§.
        while (currentIndex !== 0) {
            // ÎÇ®ÏùÄ ÏöîÏÜå Ï§ë ÌïòÎÇòÎ•º Î¨¥ÏûëÏúÑÎ°ú ÏÑ†ÌÉùÌï©ÎãàÎã§.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            // ÌòÑÏû¨ ÏöîÏÜåÏôÄ ÏÑ†ÌÉùÎêú ÏöîÏÜåÎ•º Î∞îÍøâÎãàÎã§.
            [array[currentIndex], array[randomIndex]] = [
                array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    // 3. ÏúÑÏπò Î∞∞Ïó¥ÏùÑ ÏÑûÏùå
    const shuffledPositions = shuffle(positions);

    // 4. books DOM ÏöîÏÜåÏóê ÏÑûÏù∏ ÏúÑÏπòÎ•º Ï†ÅÏö©
    // (Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä Î£®ÌîÑ Ïù¥Ï†ÑÏóê ÏúÑÏπòÎ•º Î®ºÏ†Ä ÏÑ§Ï†ïÌï©ÎãàÎã§)
    books.forEach((book, index) => {
        if (shuffledPositions[index]) {
            book.style.top = shuffledPositions[index].top;
            book.style.left = shuffledPositions[index].left;
        }
    });
    // ‚ñ≤‚ñ≤‚ñ≤ [Ï∂îÍ∞Ä ÏôÑÎ£å] ‚ñ≤‚ñ≤‚ñ≤

    function applyTransform() { stage.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`; }
    
    viewport.addEventListener('mousedown', (e) => {
        isDragging = true; startX = e.pageX; startY = e.pageY;
        dragStartX = translateX; dragStartY = translateY;
        viewport.style.cursor = 'grabbing';
    });
    window.addEventListener('mouseup', () => { isDragging = false; viewport.style.cursor = 'grab'; });
    viewport.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        const dx = e.pageX - startX; const dy = e.pageY - startY;
        translateX = dragStartX + dx; translateY = dragStartY + dy;
        requestAnimationFrame(applyTransform);
    });
    viewport.addEventListener('wheel', (e) => {
        e.preventDefault();
        const oldScale = scale;
        if (e.deltaY < 0) { scale = Math.min(2.5, scale * 1.1); } 
        else { scale = Math.max(0.3, scale / 1.1); }
        const mouseX = e.pageX - translateX; const mouseY = e.pageY - translateY;
        translateX = e.pageX - (mouseX * scale) / oldScale;
        translateY = e.pageY - (mouseY * scale) / oldScale;
        requestAnimationFrame(applyTransform);
    });

    // (Í∏∞Ï°¥ Î£®ÌîÑÎäî Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞ÄÏö©ÏúºÎ°ú Ïú†ÏßÄ)
    books.forEach((book, index) => {
        let isBookDown = false;
        let hasDragged = false; 

        book.addEventListener('mouseenter', (e) => {
            const title = book.querySelector('h2').textContent;
            const description = episodeDescriptions[title];
            
            if (description) {
                tooltipTitle.textContent = title;
                tooltipDescription.textContent = description;
                tooltip.classList.remove('hidden');
                setTimeout(() => {
                    tooltip.classList.add('visible');
                    updateTooltipPosition(e); 
                }, 10);
            }
        });

        book.addEventListener('mouseleave', () => {
            tooltip.classList.remove('visible');
        });

        book.addEventListener('mousemove', (e) => {
           updateTooltipPosition(e);
        });

        book.addEventListener('mousedown', (e) => { 
            isBookDown = true;
            hasDragged = false; 
        });
        
        viewport.addEventListener('mousemove', (e) => {
            if (isBookDown) { 
                hasDragged = true;
            }
        });
        
        book.addEventListener('mouseup', (e) => {
            if (isBookDown && !hasDragged) {
                const selectedScriptData = dialogueScripts[index];
                if (selectedScriptData) {
                    startExperience(selectedScriptData);
                }
                else console.error(`${index}Î≤à Ï±ÖÏóê Ìï¥ÎãπÌïòÎäî Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.`);
            }
            isBookDown = false;
            hasDragged = false;
        });
    });

    function updateTooltipPosition(e) {
        const tooltipRect = tooltip.getBoundingClientRect();
        let newX = e.clientX + 20;
        let newY = e.clientY + 20;

        if (newX + tooltipRect.width > window.innerWidth - 20) {
            newX = e.clientX - tooltipRect.width - 20;
        }
        if (newY + tooltipRect.height > window.innerHeight - 20) {
            newY = e.clientY - tooltipRect.height - 20;
        }

        tooltip.style.left = `${newX}px`;
        tooltip.style.top = `${newY}px`;
    }
    
    applyTransform();
}

closeButton.addEventListener('click', () => {
  scriptView.classList.add('hidden');
  scriptView.style.opacity = 0;
  episodeSelectionContainer.classList.remove('hidden');
  
  if (currentDialogueAudio) {
    currentDialogueAudio.pause();
    currentDialogueAudio = null;
  }
  if (playbackInterval) clearTimeout(playbackInterval);

  if (typeof stopChaosAnimation === 'function') {
      stopChaosAnimation(); 
  }
  document.getElementById('particleCanvas').classList.add('hidden');
});