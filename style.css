/* style.css - 5K Full Screen Scaled Version */

/* === 1. 전체 설정 및 변수 === */
@import url('https://fonts.googleapis.com/css2?family=Stick&display=swap');
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

:root { 
    --font-main: 'Pretendard', sans-serif; 
    --font-sub: 'Apple SD Gothic Neo', sans-serif; 
    --font-title: 'Stick', sans-serif;
    --color-bg: #ffffff; 
    --color-text-primary: #222222; 
    --color-text-secondary: #888888; 
    --color-border: #e0e0e0; 
    --color-black: #000000; 
}

#intro-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--color-bg); z-index: 1000;
    transition: opacity 0.8s ease-in-out;
}

#intro-container.hidden { opacity: 0; pointer-events: none; }

.logo-container {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%); text-align: center;
}

.logo-text {
    font-family: var(--font-title);
    /* [수정] 로고 크기: 화면의 5% 정도로 설정하여 너무 거대하지 않게 조정 */
    font-size: 5vw; 
    font-weight: 400; color: var(--color-text-primary);
    line-height: 1.1; min-height: 1.1em; margin: 0;
}

.logo-text .dud { opacity: 0.3; }

#startBtn {
    position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%);
}

@font-face { font-family: 'Apple SD Gothic Neo'; font-weight: 500; font-style: normal; font-display: swap; src: url('https://cdn.jsdelivr.net/gh/fonts-archive/AppleSDGothicNeo/AppleSDGothicNeo-Medium.woff2') format('woff2'), url('https://cdn.jsdelivr.net/gh/fonts-archive/AppleSDGothicNeo/AppleSDGothicNeo-Medium.ttf') format('truetype'); }
body { margin: 0; font-family: var(--font-main); background-color: var(--color-bg); color: var(--color-text-primary); overflow: hidden; }

/* === 2. 버튼 공통 스타일 === */
.btn { 
    /* [수정] 버튼 크기 반응형: px 대신 vw 사용 */
    padding: 1vw 2vw; 
    font-size: 1.1vw; 
    background: var(--color-bg); color: var(--color-black); 
    border: 1px solid #ddd; border-radius: 0.6vw; 
    cursor: pointer; transition: all 0.2s ease; font-family: var(--font-sub); font-weight: 500; 
}
.btn:hover { background-color: #f5f5f5; transform: translateY(-0.2vw); }
.btn:disabled { cursor: not-allowed; background-color: #f9f9f9; color: #aaa; }
#retryBtn { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10000; }

/* === 3. 스크립트 텍스트 영역 === */
#script-columns { display: flex; width: 100%; height: 100vh; position: absolute; top: 0; left: 0; }
.column { 
    width: 33.33%; height: 100%; overflow-y: scroll; 
    /* [수정] 배경 글씨 크기 및 패딩 반응형 */
    padding: 2.5vw; 
    font-size: 8vw; 
    line-height: 1.8; white-space: pre-wrap; box-sizing: border-box; border-right: 1px solid var(--color-border); 
}
.column:last-child { border-right: none; }
.column::-webkit-scrollbar { width: 4px; }
.column::-webkit-scrollbar-thumb { background-color: #bbb; border-radius: 2px; }

/* === 4. 재조합 문장 시각화 === */
#sentence-container { 
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
    /* [수정] 중앙 텍스트 영역을 화면 너비 90%로 꽉 채움 */
    max-width: 90vw; 
    width: 90vw;
    padding: 1.5vw; 
    text-align: center; 
    font-size: 2.3vw; 
    line-height: 1.8; white-space: pre-wrap; z-index: 20; 
}
.container { display: flex; justify-content: center; flex-wrap: wrap; margin-bottom: 0.5vw; }
.blur { animation: blur-text 1.2s ease-in-out forwards; font-weight: 800; margin: 0.3vw 0.5vw; }
@keyframes blur-text { 0% { filter: blur(4px); opacity: .6; } 100% { filter: blur(0); opacity: 1; } }
.text { margin: 0.3vw 0.5vw; font-weight: 200; }
.dud  { opacity: .5; }

/* === 5. 음성 인식 UI 및 애니메이션 === */
#listening-ui { 
    position: fixed; bottom: 8%; left: 50%; transform: translateX(-50%); 
    display: flex; flex-direction: column; align-items: center; 
    gap: 1.5vw; z-index: 200; 
}
#listening-ui .circle-container { 
    width: 5.5vw; height: 5.5vw; 
    position: relative; display: flex; justify-content: center; align-items: center; 
}
#listening-ui #statusText { 
    font-family: var(--font-sub); font-weight: 500; 
    font-size: 1.1vw; 
    color: var(--color-text-secondary); white-space: nowrap; min-height: 1.2em; 
}
#listening-ui .ring { position: absolute; border-radius: 50%; background-color: var(--color-black); }

#circle {
    width: 1.4vw; height: 1.4vw;
    animation-name: breathingWave; animation-iteration-count: infinite;
    animation-duration: 2.2s; animation-timing-function: ease-in-out; 
    transition: animation-duration 0.5s ease-in-out;
}
#circle.is-listening { animation-duration: 1.0s; animation-timing-function: ease-in-out; }

@keyframes breathingWave { 
  0%, 100% { width: 1.4vw; height: 1.4vw; opacity: 1; } 
  50% { width: 4.2vw; height: 4.2vw; opacity: 0.85; } 
}

/* === 6. 오버레이/유틸 === */
#blur-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; backdrop-filter: blur(12px); background-color: rgba(0, 0, 0, 0.25); z-index: 9999; }
.hidden { display: none !important; }

/* === 9. 파티클 애니메이션 캔버스 === */
#particleCanvas { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: transparent; z-index: 45; pointer-events: none; transition: opacity 0.5s ease; }
#particleCanvas:not(.hidden) { opacity: 1; }

/* === 10. AI 추천 UI 스타일 === */
#inspiration-ui { 
    position: fixed; top: 40%; left: 50%; transform: translate(-50%, -50%); 
    width: 100%; max-width: 90vw; 
    padding: 1.5vw; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; z-index: 100; 
}
.inspiration-header { text-align: center; margin-bottom: 2vw; }
.inspiration-header h1 { 
    font-family: var(--font-main); font-size: 2.2vw; font-weight: 700; 
    color: var(--color-text-primary); margin: 0 0 1vw 0; 
}
.inspiration-header p { 
    font-family: var(--font-main); font-size: 1.2vw; font-weight: 400; 
    color: var(--color-text-secondary); margin: 0; line-height: 1.5; 
}
.inspiration-chips { display: flex; justify-content: center; flex-wrap: wrap; gap: 1vw; }
.chip { 
    display: inline-block; padding: 0.7vw 1.4vw; 
    font-family: var(--font-sub); font-size: 1.1vw; color: #888888; 
    background-color: transparent; border: 1px solid #d0d0d0; 
    border-radius: 4vw; transition: all 0.2s ease; cursor: default; 
}
.chip:hover { border-color: #a0a0d0; color: var(--color-text-primary); }

/* === Guide Pill (상단 안내 바) === */
.guide-pill {
    position: fixed; top: 3vh; left: 50%; z-index: 100;
    padding: 0.8vw 1.6vw; 
    background-color: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); 
    border: 1px solid rgba(0, 0, 0, 0.05); border-radius: 3vw; 
    box-shadow: 0 0.3vw 1.5vw rgba(0, 0, 0, 0.06); 
    font-family: var(--font-main); font-size: 1.2vw; font-weight: 500; color: #444444; 
    text-align: center; white-space: nowrap;
}

/* === 11. 답변 유도 안내문 스타일 === */
.response-guides-container { 
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
    display: flex; flex-direction: row; gap: 30vw; z-index: 200; 
    transition: opacity 0.6s ease-out, transform 0.6s ease-out; 
}
.text-guide { 
    font-size: 2.5vw; font-weight: 700; color: var(--color-text-secondary); 
    animation: pulse-text 3s infinite ease-in-out; cursor: pointer; 
    transition: color 0.2s ease, transform 0.2s ease; 
}
.text-guide:nth-child(2) { animation-delay: -1.5s; }
.text-guide:hover { color: var(--color-text-primary); transform: scale(1.05); }

@keyframes pulse-text { 0%, 100% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 1; } }

.re-prompt-guide {
    pointer-events: none; opacity: 0;
    transform: translate(-50%, 0) scale(0.95); 
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}
.re-prompt-guide.visible { opacity: 1; transform: translate(-50%, 0) scale(1); }
.info-text { transform: translateX(-50%); }

/* === 12. 에피소드 선택 화면 스타일 === */
#episode-selection-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; opacity: 1; transition: opacity 0.5s ease; background-color: var(--color-bg); z-index: 50; }
#viewport { width: 100vw; height: 100vh; overflow: hidden; cursor: grab; position: relative; }
#stage { position: absolute; width: 300vw; height: 300vh; left: 0; top: 0; transform-origin: 0 0; }

/* [수정] 책 크기를 화면 비례(vw)로 설정하여 비율 유지 */
.book { 
    position: absolute; 
    width: 16.5vw; /* 기존 맥북 비율 유지 */
    height: 23.1vw; 
    background-color: #ffffff; border: 1px solid var(--color-border); border-radius: 0.6vw; 
    box-shadow: 0 0.4vw 1.5vw rgba(0, 0, 0, 0.07); 
    padding: 1.6vw; box-sizing: border-box; 
    display: flex; flex-direction: column; justify-content: flex-end; 
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out; cursor: pointer; 
}
.book:hover { transform: translateY(-0.7vw) scale(1.05); box-shadow: 0 0.7vw 2vw rgba(0, 0, 0, 0.1); }
.book h2 { font-size: 1.8vw; margin: 0 0 0.4vw 0; text-align: left; }
.book p { font-size: 1vw; color: var(--color-text-secondary); margin: 0; text-align: left; }

/* [수정] 툴팁 크기 반응형 */
#episode-tooltip {
    position: fixed; width: 20vw;
    background-color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 0.8vw;
    box-shadow: 0 0.5vw 2vw rgba(0, 0, 0, 0.12); padding: 1.5vw; box-sizing: border-box;
    z-index: 100; opacity: 0; transform: translateY(10px); 
    transition: opacity 0.3s ease, transform 0.3s ease; pointer-events: none;
}
#episode-tooltip.visible { opacity: 1; transform: translateY(0); }
#tooltip-title { font-size: 1.3vw; font-weight: 600; margin: 0 0 0.5vw 0; color: var(--color-text-primary); }
#tooltip-description { font-size: 1vw; line-height: 1.6; color: #444; margin: 0; }

/* === 13. 스크립트 뷰 스타일 === */
#script-view {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.7); z-index: 40;
    display: flex; justify-content: center; align-items: center;
    pointer-events: none; opacity: 0; transition: opacity 0.5s ease;
}
#script-view:not(.hidden) { pointer-events: auto; }

.script-content-wrapper {
    /* [핵심 수정] max-width를 없애고 화면 너비의 60%로 꽉 차게 설정 */
    width: 60vw; 
    height: 75vh; 
    max-width: none; /* 1400px 제한 제거 -> 화면에 꽉 참 */
    background-color: var(--color-bg); border: 1px solid var(--color-border); 
    border-radius: 1vw; box-shadow: 0 0.5vw 2vw rgba(0, 0, 0, 0.08); 
    overflow-y: auto; padding: 2.5vw; box-sizing: border-box;
}
.script-content-wrapper::-webkit-scrollbar { width: 6px; }
.script-content-wrapper::-webkit-scrollbar-track { background: transparent; }
.script-content-wrapper::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px; }

.script-content { width: 100%; }
#script-body {
    width: 100%; 
    /* [수정] 대본 글자 크기 반응형 */
    font-size: 1.6vw; 
    line-height: 2.2; color: var(--color-text-primary); text-align: center;
}
#script-body .line { white-space: pre-wrap; word-break: keep-all; opacity: 1; transition: opacity 0.4s ease, color 0.4s ease, transform 0.4s ease; }
#script-body.playing .line { opacity: 0.35; color: #aaa; }
#script-body.playing .line.active { opacity: 1; color: var(--color-text-primary); transform: scale(1.01); }

#close-button {
    position: fixed; top: 2.5vw; right: 3vw; 
    font-size: 3vw; background: none; border: none; color: var(--color-text-secondary); 
    cursor: pointer; transition: transform 0.2s ease; z-index: 210; pointer-events: auto;
}
#close-button:hover { transform: scale(1.1); }

/* === 14. 힌트 스낵바 스타일 === */
#hint-snackbar {
    position: fixed; z-index: 2000; top: 2.5vw; right: 2vw;
    background-color: var(--color-bg, #fff); border: 1px solid var(--color-border, #e0e0e0);
    border-radius: 0.7vw; box-shadow: 0 0.4vw 1.5vw rgba(0, 0, 0, 0.08);
    display: flex; align-items: center; 
    padding: 0.9vw 1.4vw; width: auto; max-width: 30vw;
    font-family: var(--font-sub, 'Apple SD Gothic Neo'); font-weight: 500; 
    font-size: 1vw; color: var(--color-text-primary, #222);
    visibility: hidden; opacity: 0; transform: translateX(100%);
    transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1), opacity 0.5s cubic-bezier(0.23, 1, 0.32, 1), visibility 0.5s;
}
#hint-snackbar.show { visibility: visible; opacity: 1; transform: translateX(0); }

.snackbar-icon {
    display: grid; place-items: center; flex-shrink: 0;
    width: 1.4vw; height: 1.4vw; margin-right: 0.8vw;
    border-radius: 50%; background-color: var(--color-border, #e0e0e0);
    color: var(--color-text-secondary, #888);
    font-size: 0.9vw; font-weight: 700; line-height: 1;
    font-family: 'Times New Roman', Times, serif;
}
#snackbar-text { line-height: 1.5; }